---------------User Query---------------
{
    "id": "56292336e4b0682904230a52",
    "stateKey": "c19cb2bf-9303-4f97-8573-9182849d963c",
    "username": "tp|0e5fab3f1a",
    "redirectUri": "http://xx.xx.xx.xx:8083/authorize/fitbit/callback?state=c19cb2bf-9303-4f97-8573-9182849d963c",
    "requestParams": {
        "oauth_token": "699018ef6491ead4cadf682507bca5a0",
        "oauth_token_secret": "6130fa167f49d2149cbec7d04cf14244"
    },
    "authorizationUrl": "https://www.fitbit.com/oauth/authenticate?oauth_consumer_key=1651ecdcf167d2a5928a5d243664f209&oauth_nonce=4705931066521466871&oauth_signature=3HaA0rk1cz5TgqxxRu0faHqVs44%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1445536566&oauth_token=699018ef6491ead4cadf682507bca5a0&oauth_version=1.0",
    "clientRedirectUrl": "oob",
    "isAuthorized": false,
    "serializedRequest": null
}

---------------Response---------------
```json
{
    "id": "56292336e4b0682904230a52",
    "stateKey": "c19cb2bf-9303-4f97-8573-9182849d963c",
    "username": "tp|0e5fab3f1a",
    "redirectUri": "https://xx.xx.xx.xx:8083/authorize/fitbit/callback?state=c19cb2bf-9303-4f97-8573-9182849d963c",
    "requestParams": {
        "code": "699018ef6491ead4cadf682507bca5a0" 
    },
    "authorizationUrl": "https://www.fitbit.com/oauth2/authorize?client_id=1651ecdcf167d2a5928a5d243664f209&response_type=code&scope=activity%20heartrate%20profile&redirect_uri=https%3A%2F%2Fxx.xx.xx.xx%3A8083%2Fauthorize%2Ffitbit%2Fcallback&state=c19cb2bf-9303-4f97-8573-9182849d963c",
    "clientRedirectUrl": "oob",
    "isAuthorized": false,
    "serializedRequest": null
}
```

---------------Similarity Score---------------
0.8471608940000002

---------------Relevant Context---------------

Context number 1 (score: 0.876147509): 
Authorize Initiates the OAuth 2.0 authorization flow by presenting the consent screen to the Fitbit user. Request URL https://www.fitbit.com/oauth2/authorize Query Parameters client_id required This is the Fitbit API application id created within dev.fitbit.com . Type: string response_type required code for Authorization Code Grant Flow [with PKCE] token for Implicit Grant Flow. Type: string scope required A space-delimited list of the permissions you are requesting. See Scopes . Type: string redirect_uri recommended Where Fitbit should send the user after the user grants or denies consent. Required unless only one redirect URI is specified for the application in the settings on dev.fitbit.com . See Redirect URIs . Type: URI expires_in optional For use with the Implicit Grant Flow only. Pre-select the desired access token lifetime. Authorization Code Grant flow [with PKCE] access tokens only support a lifetime of 8 hours (e.g. 28800). 86400 for 1 day 604800 for 1 week 2592000 for 30 days 31536000 for 1 year Default: 86400 Type: string prompt optional Specify if you need to force the Fitbit authentication or the OAuth 2.0 authorization page to be displayed. When used, the redirect_uri parameter must be specified. none for default behavior. consent to require consent from the user, even if they have previously authorized your application. login to require the user to sign in, but request consent according to the default behavior. login consent to require the user to sign in and authorize your application. The space in this parameter value needs to be URL encoded. Type: string state recommended Provides any state that might be useful to your application when the user is redirected back to your application. This parameter will be added to the redirect URI exactly as your application specifies. Fitbit strongly recommend including an anti-forgery token in this parameter and confirming its value in the redirect to mitigate against cross-site request forgery (CSRF). Type: string code_challenge (For use with PKCE only) optional / required The code challenge is derived from the code verifier by using a transformation on the code verifier. The code verifier is a cryptographically random string dynamically created for each authorization request. The available transformations are S256 and plain .
Context number 2 (score: 0.872158051): 
This should only be used when the application cannot safely store the client secret. For example, POST https ://api.fitbit.com/oauth2/token Content-Type: application/x-www-form-urlencoded client_id=ABC123&code=<authorization_code>&code_verifier=<code_verifier>&grant_type=authorization_code Step 5 - Receive the Access and Refresh Tokens The Token endpoint returns a JSON-encoded response that includes: The user id of the person who authorized access The access token used to query the user's data The refresh token the application will use to obtain a new access and refresh token pair The lifespan of the access token in seconds The scopes the user enabled on the Fitbit Authorization page We recommend the application store this information and refer back to it as needed. If the application loses the refresh token for a user, the user will need to re-authorize the application, again. Example { "access_token": "<access_token>", "expires_in": 28800, "refresh_token": "<refresh_token>", "scope": "activity heartrate nutrition oxygen_saturation respiratory_rate settings sleep temperature weight", "token_type": "Bearer", "user_id": "<user_id>" } Other Supported Authorization Flows Authorization Code Grant Flow (without PKCE) This is the original variant of Authorization Code Grant flow, defined by RFC 6749 , which is superseded by PKCE. Unlike PKCE, this variant does not support the code verifier or challenge values when requesting user authorization. Instead, two other methods are used to help secure this flow. Only server application types may omit PKCE. This means that a client secret must be used when obtaining access and refresh tokens To protect against Cross Site Request Forgery (CSRF) attacks, the application should pass an anti-forgery token in the "state" parameter when showing the Authorization page. This should be an unguessable value associated with the user. Fitbit will pass back this value as a query parameter in the redirect URL, and your application must verify that it matches. Implicit Grant Flow Defined by RFC 6749 , this authorization flow is no longer recommended as an OAuth 2.0 best practice. Unlike the Authorization Code Grant flow, the authorization page directly returns an access token making the consent process highly susceptible to a number of security attacks . When using the Implicit Grant flow, The registered application must be configured with the "client" OAuth 2.0 Application type.
Context number 3 (score: 0.860468447): 
Appended to the redirect URL is the authorization code located between the "code" parameter name and the string "#_=_". Following is an example of the redirect URL with the authorization code highlighted: https ://myapp.com/callback?code= d62d6f5bdc13df79d9a5f #_=_ Mobile Development : Fitbit recommends using a Universal Link (iOS) or App Link (Android) when redirecting back into the application. Step 4 - Exchange the Authorization Code for the Access and Refresh Tokens The application should extract the authorization code from the redirect URL and exchange it for the access token and refresh token. The tokens are obtained by calling the /oauth2/token endpoint and providing the following parameters within the body of the HTTPS POST request. See Token API for more information The required query parameters are: client_id : The Fitbit API application ID from https://dev.fitbit.com/apps . code : The authorization code code_verifier : The code verifier value from step 1. grant_type : authorization_code The application type (server, client or personal) defined in the registered application settings determines how the Token API endpoint is authorized to Fitbit. Server Application Type Server application types must authenticate themselves using the client secret available in application settings. This provides the highest level of security to the OAuth 2.0 flow. However it should only be used by applications that can securely store the client secret, such as apps running on a web server. Notably, the client secret should never be included in application source code or stored on an end-user device where it can be discovered. These applications authenticate by specifying the Authorization header to the request, and include the "Basic" token. The basic token is a base64-encoded concatenation of the client ID and secret, separated by a colon: BASE64ENCODE(<client_id>:<client_secret>) For example, with a client ID “ABC123” and secret “DEF456”, POST https ://api.fitbit.com/oauth2/token Authorization: Basic QUJDMTIzOkRFRjQ1Ng== Content-Type: application/x-www-form-urlencoded client_id=ABC123&code=<authorization_code>&code_verifier=<code_verifier>&grant_type=authorization_code Client and Personal Application Types Client and personal application types can call /oauth2/token without any additional security requirements. This should only be used when the application cannot safely store the client secret.
Context number 4 (score: 0.856793046): 
OAuth2 Token The /oauth2/token endpoint can do the following: Exchange the authorization code for the initial access token and refresh token (See OAuth2 Token ). This process is required when using the Authorization Code Grant Flow. Obtain a new access token and refresh token when the existing access token has expired (See Refresh Token ). Initiate the Client Credentials authorization flow (See Client Credentials ). Request POST /oauth2/token Body Parameters code required The authorization code received in the redirect as a URI parameter. The authorization code is only valid for 10 minutes. Type: string grant_type required Supported: authorization_code Type: string client_id required for client apps This is your Fitbit API application ID from your settings on https://dev.fitbit.com . Apps set to type "client" should use this to pass their ID instead of the Authorization header. Type: string redirect_uri recommended / required Required if specified in the redirect to the authorization page. Must be exact match. Type: URI expires_in optional Specifies the desired access token lifetime. 28800 for 8 hours Supported: 28800 Type: integer code_verifier (For use with PKCE only) required The code verifier is used to derive the code challenge while obtaining the access code in the authorization request. This string is the base64url-encoding of a cryptographically, random-generated octet sequence. Type: string Request Headers authorization (For use with server apps only) required Must be set to Basic followed by a space, then the Base64 encoded string of your application's client id and secret concatenated with a colon. For example, the Base64 encoded string, Y2xpZW50X2lkOmNsaWVudCBzZWNyZXQ= , is decoded as "client_id:client secret" . Token type: Basic accept optional The media type of the response content the client is expecting. Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization .
Context number 5 (score: 0.855136216): 
token_type Supported : Bearer Returned with Implicit Grant Flow. expires_in Time when the access token expires. Returned with Implicit Grant Flow. scope List of scopes enabled by the Fitbit user. Returned with Implicit Grant Flow. Authorization Code Grant Flow [with PKCE] https ://example.com/callback?code=<authorization_code>#_=_0 Implicit Grant Flow https ://example.com/callback#access_token=<access_token> &user_id=<user_id> &token_type=Bearer &expires_in=604800 &scope=social+weight+nutrition+profile... Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated. This means that there may be a minor delay in the decrementing of remaining requests. This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code. List of codes are found in the Troubleshooting Guide . Status Message Description of the status code. Response Body Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure. Response Codes For a complete list of authorization errors, please refer to the Troubleshooting Guide . Additional Information Localizing the consent page The Fitbit consent page supports localization. Since it is just a web form, the text is translated based on the user's "Language by Region/Country" setting in their Fitbit account. The user's device or browser language settings may translate the consent language, as well. We do not support a query parameter that forces language conversion. Client Credentials Grant Flow
Context number 6 (score: 0.85098): 
When using the Implicit Grant flow, The registered application must be configured with the "client" OAuth 2.0 Application type. The user may specify a lifetime for the access token up to one year. After the user consents, the redirect URL contains the access token. A refresh token is not provided. Once the access token expires, the user will need to authorize the application again. With the Implicit Grant FLow, Fitbit will pass the following parameters to the application's redirect URL after the # access_token The access token your application should use to call endpoints on behalf of the user. expires_in The lifetime of the access token in seconds. scope A space-separated list of scopes the user authorized. state recommeded Provides any state that might be useful to your application when the user is redirected back to your application. This parameter will be added to the redirect URI exactly as your application specifies. Fitbit strongly recommend including an anti-forgery token in this parameter and confirming its value in the redirect to mitigate against cross-site request forgery (CSRF). token_type Supported : Bearer user_id The Fitbit user id Client Credentials Defined by RFC 6749 , this authorization flow is used with specific Fitbit API endpoints related to business operations. It is not supported by the public Web APIs to retrieve Fitbit user data. See Client Credentials Getting Started Application Design
Context number 7 (score: 0.850930035): 
Step 2 - Request Authorization to Fitbit User Data Using a web browser, the application calls the Authorize endpoint to display Fitbit's Authorization page to the user. If necessary, the user may need to log in with their Fitbit credentials. Mobile Development : Use either custom tabs (Android) or the SFSafariViewController (iOS) instead of their webview counterparts. This allows the Fitbit user to know they are logging into the secure Fitbit site. The required query parameters are: client_id : The Fitbit API application ID from https://dev.fitbit.com/apps . scope : A space-delimited list of data collections requested by the application. code_challenge : The base64url-encoded SHA256 hash of the code verifier. code_challenge_method : S256 response_type : code For example, the following URL will load the Authorization page https ://www.fitbit.com/oauth2/authorize?client_id=ABC123&response_type=code &code_challenge=<code_challenge>&code_challenge_method=S256 &scope=activity%20heartrate%20location%20nutrition%20oxygen_saturation%20profile %20respiratory_rate%20settings%20sleep%20social%20temperature%20weight The user will select the data collections, or scopes, they want to share with the application. If the user has previously consented to the same requested scopes, the flow will skip this UI and proceed directly to the next step. NOTE : The application is not allowed to enable all scopes by default or force a user to enable all scopes. Instead, we suggest encouraging the users to enable all scopes by stating something like “For the best user experience, we recommend you enable all listed scopes” See Fitbit’s Platform Terms of Service for more details. It is ultimately up to the Fitbit user whether or not all of the scopes are enabled. Therefore, the application should not break if a scope is not granted. Step 3 - Retrieving the Authorization Code Once the user authorizes access to their data, Fitbit returns the user back to the application using the redirect URL. Appended to the redirect URL is the authorization code located between the "code" parameter name and the string "#_=_".
Context number 8 (score: 0.849589825): 
expires_in The time the access token expires in seconds. refresh_token The updated active refresh token. token_type Supported : Bearer user_id The Fitbit user ID associated with the access token and refresh token { "access_token": "eyJhbGciOiJIUzI1...", "expires_in": 28800, "refresh_token": "c643a63c072f0f05478e9d18b991db80ef6061e...", "token_type": "Bearer", "user_id": "GGNJL9" } Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated. This means that there may be a minor delay in the decrementing of remaining requests. This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code. List of codes are found in the Troubleshooting Guide . Status Message Description of the status code. Response Body Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure. Response Codes 200 A successful request. 400 The request had bad syntax or was inherently impossible to be satisfied. 401 The request requires user authentication. Note: For a complete list of response codes, please refer to the Troubleshooting Guide . Additional Information JSON Web Tokens Fitbit API access tokens use the JSON Web Token (JWT) format. Fitbit reserves the right to change the contents and format of these tokens at any time. Client applications should not create dependencies upon the token format. Access tokens and refresh tokens may be up to 1,024 bytes in size. Web Browser Compatibility The Fitbit API and its implementation of OAuth 2.0 are designed to work with the current and one previous version of Apple Safari, Google Chrome, Microsoft Edge, and Mozilla Firefox. When a new version of a web browser is released, Fitbit begins supporting that version and stop supporting the third most recent version. Introspect Refresh Token
Context number 9 (score: 0.844077766): 
Client Credentials Grant Flow The /oauth2/token endpoint can do the following: Exchange the authorization code for the initial access token and refresh token (See OAuth2 Token ). This process is required when using the Authorization Code Grant Flow [with PKCE]. Obtain a new access token and refresh token when the existing access token has expired (See Refresh Token ). Initiate the Client Credentials authorization flow (See Client Credentials ). Fitbit follows the OAuth 2.0 Client Credentials flow as specified in RFC 6749 . This authorization flow is used with specific Fitbit API endpoints related to business operations. It is not supported by the public Web APIs to retrieve Fitbit user data. The Client Credentials Grant flow has the following steps: The application sends a request to https ://api.fitbit.com/oauth2/token with its client_id and client_secret; and Fitbit authenticates your application and issues an access token. Request POST /oauth2/token Body Parameters grant_type required Supported: client_credentials Type: string expires_in optional Pre-select the desired access token lifetime. 3600 for 1 hour 28800 for 8 hours 86400 for 1 day 604800 for 1 week 2592000 for 30 days 31536000 for 1 year Default: 28800 Type: string Request Headers authorization required Must be set to Basic followed by a space, then the Base64 encoded string of your application's client id and secret concatenated with a colon. For example, the Base64 encoded string, Y2xpZW50X2lkOmNsaWVudCBzZWNyZXQ= , is decoded as "client_id:client secret" . Token type: Basic accept optional The media type of the response content the client is expecting. Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization . Examples URL CURL POST https ://api.fitbit.com/oauth2/token Authorization: Basic <basic_token> Content-Type: application/x-www-form-urlencoded grant_type=client_credentials curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -H "authorization: Basic <basic_token>" \ -d "grant_type=client_credentials" Response Description Example Response Element Name Description access_token The active access token.
Context number 10 (score: 0.842887223): 
Fitbit-Rate-Limit-Remaining : The number of calls remaining before hitting the rate limit. Fitbit-Rate-Limit-Reset : The number of seconds until the rate limit resets. The data in the rate limit headers is updated asynchronously and is approximate. A slight delay when decrementing the remaining count could be expected for larger implementations. This would result with the application receiving a 429 Too Many Requests status code sooner than anticipated, if the application does not track its usage. Automatic Email Notices The Fitbit Web API will email the application owner when the hourly rate limit has exceeded. These are courtesy notices. Action is not required unless there is interest to optimize the Fitbit integration. Redirect URL This URL is the location in your application the Fitbit user is sent after user consent has occurred. During the authorization process, the user is sent to Fitbit’s OAuth 2.0 Authorization web page. The user is returned back to your application after successful authorization via the redirect URL. Native applications can use custom URL schemes as redirect URLs to redirect the user from the browser back to the application requesting permission. According to RFC 3986, Section 4.3 , the redirect URL is absolute and should not be fragmented. The syntax for the redirect URL should be absolute-URI = scheme ":" hier-part [ "?" query ] You must specify the full redirect URL in your application settings on https://dev.fitbit.com . An application may have multiple redirect URLs registered by putting one redirect URL per line in your application settings. Fitbit strongly recommends that you always specify the intended redirect URL value with the redirect_uri parameter when sending users to the authorization page. The redirect_uri must be an exact match to one of the values specified in your application settings. Note : Use the state parameter if you need variability in your redirect URI. Unicode characters are allowed, but should be converted to punycode. Not doing so will result in a URL mismatch during the OAuth flow. When using the Authorization Code Grant Flow or the Authorization Code Grant Flow with PKCE, Fitbit will append #_=_ at the end of your redirect URL upon success or failure of the authorization. Note : Fitbit only supports HTTPS for redirect URLs. Social Login Support The Fitbit Web API supports social login (Google only) only for the Authorization Grant Flows as part of the web single sign-on (SSO).
Context number 11 (score: 0.84098804): 
This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code. List of codes are found in the Troubleshooting Guide . Status Message Description of the status code. Response Body Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure. Response Codes 200 A successful request. 400 The request had bad syntax or was inherently impossible to be satisfied. 401 The request requires user authentication. Note: For a complete list of response codes, please refer to the Troubleshooting Guide . Additional Information An access token intentionally is short lived. This is an important security mechanism of OAuth 2.0. When using the Authorization Code Grant Flow [with PKCE]. By default, the access tokens have an eight-hour lifetime. When an access token expires, an HTTP 401 error will be returned. { "errors": [ { "errorType": "expired_token", "message": "Access token expired: eyJhbGciOiJIUzI1NiJ9...." } ] } At this point, your application needs to refresh the access token. The Fitbit API follows RFC6749 specification for refreshing access tokens. A refresh token does not expire until it is used. The refresh token can only be used once, as a new refresh token is returned with the new access token. If the application makes identical refresh token requests within a two-minute period, the Fitbit Web API will return the same response. This is to assist applications unable to coordinate the refresh token flow between processes. Alternatively, your application could redirect the user to the authentication flow. If the user is signed in and the scopes requested match the previously granted scopes, the user will be redirected to your redirect URL with a new access token without being prompted. OAuth2 Token Revoke Token
Context number 12 (score: 0.840873957): 
Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization . Examples URL CURL App Type: Server POST https ://api.fitbit.com/oauth2/token Authorization: Basic <basic_token> Content-Type: application/x-www-form-urlencoded grant_type=refresh_token&refresh_token=<refresh_token> App Type: Client POST https ://api.fitbit.com/oauth2/token Content-Type: application/x-www-form-urlencoded client_id=<client_id>&grant_type=refresh_token&refresh_token=<refresh_token> Application Type: Server curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -H "authorization: Basic <basic_token>" \ -d "grant_type=refresh_token&refresh_token=<refresh_token>" Application Type: Client curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -d "client_id=<client_id>&grant_type=refresh_token&refresh_token=<refresh_token>" Response Description Example Response Element Name Description access_token The updated active access token. expires_in the time the access token expires in seconds. refresh_token the updated active refresh token. token_type Supported : Bearer user_id The Fitbit user ID associated with the access token and refresh token. { "access_token": "eyJhbGciOiJIUzI1...", "expires_in": 28800, "refresh_token": "c643a63c072f0f05478e9d18b991db80ef6061e...", "token_type": "Bearer", "user_id": "GGNJL9" } Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated. This means that there may be a minor delay in the decrementing of remaining requests. This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code.
Context number 13 (score: 0.839977145): 
Note : Fitbit only supports HTTPS for redirect URLs. Social Login Support The Fitbit Web API supports social login (Google only) only for the Authorization Grant Flows as part of the web single sign-on (SSO). When the OAuth 2.0 authorization flow requires access to the Fitbit user’s account while prompting for user consent, social login can be used with the Fitbit web application. If the user has already logged into their www.fitbit.com account using their Google account, they won’t be shown the sign-in form prior to the authorization consent form, unless prompt=login. Scopes All Fitbit API endpoints that retrieve user data require user consent to that data collection through one or more scopes. The application must provide the list of scopes when calling the Authorize endpoint. The access token issued will only contain the scopes the Fitbit user authorized. Available Scopes activity Includes activity data and exercise log related features, such as steps, distance, calories burned, and active minutes. cardio_fitness Includes the maximum or optimum rate at which the user’s heart, lungs, and muscles can effectively use oxygen during exercise. electrocardiogram Includes the user's on-device ECG readings. heartrate Includes the continuous heart rate data and related analysis. irregular_rhythm_notifications Includes the user's engagement and list of irregular rhythm notification alerts. location Includes the GPS and other location data. nutrition Includes calorie consumption and nutrition related features, such as food/water logging, goals, and plans. oxygen_saturation Includes measurements of blood oxygen level. profile Includes basic user information. respiratory_rate Includes measurements of average breaths per minute at night. settings Includes user account and device settings, such as alarms. sleep Includes sleep logs and related sleep analysis. social Includes friend-related features, such as friend list and leaderboard. temperature Includes skin and core temperature data. weight Includes weight and body fat information, such as body mass index, body fat percentage, and goals. Obtaining Consent through Scopes When the application begins the authorization process, the OAuth 2.0 Authorization page will be displayed to the Fitbit user requesting permission to access the data sets that are required by the application. OAuth 2.0 refers to these permissions as “scopes”. Applications should only request permission for scopes they intend to access or modify.
Context number 14 (score: 0.839931): 
Introspect Allows the application to retrieve the active state of an OAuth 2.0 token. This endpoint conforms to RFC 7662 . Request POST /1.1/oauth2/introspect Body Parameters token required The OAuth 2.0 token to retrieve the current state. Different from the access token used in the Authorization header, this token can be any access token. Type: string Request Headers authorization required Specify the token type and Fitbit user’s access token. Token type: Bearer content-type required The original media type of the resource. Supported: application/x-www-form-urlencoded accept optional The media type of the response content the client is expecting. Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization . Examples URL CURL POST https ://api.fitbit.com/1.1/oauth2/introspect Authorization: Bearer <access_token> Content-Type: application/x-www-form-urlencoded token=<The OAuth 2.0 token to retrieve the state> curl -X POST "https ://api.fitbit.com/1.1/oauth2/introspect" \ -H "authorization: Bearer <access_token> \" -H "content-type: application/x-www-form-urlencoded" \ -d "token=<The OAuth 2.0 token to retrieve the state>" Response Description Example Response Element Name Description active Supported: true | false scope States the scope and ability to read/write. client_id The client ID for the granted application. user_id The Fitbit user ID. token_type Supported: access_token exp The token's expiration date. iat The token's issued date. { "active":true, "scope":"{ACTIVITY=READ_WRITE}", "client_id":"<Client Id>", "user_id":"<User Id>", "token_type":"access_token", "exp":<expiration date>, "iat":<issued date> } or { "active": false } Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated.
Context number 15 (score: 0.839659691): 
OAuth 2.0 refers to these permissions as “scopes”. Applications should only request permission for scopes they intend to access or modify. NOTE : The application is not allowed to enable all scopes by default or force a user to enable all scopes. Instead, we suggest encouraging the users to enable all scopes by stating something like “For the best user experience, we recommend you enable all listed scopes” See Fitbit’s Platform Terms of Service for more details. It is ultimately up to the Fitbit user whether or not all of the scopes are enabled. Therefore, the application should not break if a scope is not granted. Displaying the Authorization Page If an access token is not automatically available to Fitbit, the Fitbit OAuth 2.0 Authorization page is presented to the user in a web form during the authorization process. For security consideration, the consent page must be presented in a dedicated browser view. Fitbit users can only confirm they are authenticating with the genuine Fitbit.com site if they have the tools provided by the browser, such as the URL bar and Transport Layer Security (TLS) certificate information. Native applications - the authorization page must open in the default browser. Native applications can use custom URL schemes as redirect URIs to redirect the user back from the browser to the application requesting permission. iOS applications - may use the SFSafariViewController class instead of app switching to Safari. Use of the WKWebView or UIWebView class is prohibited. Android applications - may use Chrome custom tabs instead of application switching to the default browser. Use of WebView is prohibited. Web applications - do not use an iframe. Web applications may use a pop-up window, so long as the URL bar is visible. WARNING - DO NOT embed the Authorization Page. Any attempt to embed the OAuth 2.0 authentication page will result in your application being banned from the Fitbit API. Tokens A token is an object that provides access to a specific resource. The Fitbit Web APIs utilize 3 different types of tokens. The Basic Token is the Base64 encoded string of the application's client id and secret concatenated with a colon (e.g. [client_id]:[client_secret]). The basic token is used with access token and refresh token requests. The Access Token , also known as the Bearer Token, is a unique, signed JWT object used to denote the permissions a Fitbit user has granted to a specific application.
Context number 16 (score: 0.837670267): 
Authorization The Authorization endpoints allow an application to onboard Fitbit users who want to share their data with the specified application. The application can initiate the consent flow for new users, obtain the access token and refresh tokens, validate the tokens, and revoke consent to the user. Fitbit supports OAuth 2.0. The authorization models we support are Authorization Code Grant Flow, Authorization Code Grant Flow with PKCE and Implicit Grant Flow. We recommend Authorization Code Grant Flow with PKCE, and our examples demonstrate how to set it up. Client Credentials is supported but does not allow the retrieval of user data. It works only with the Fitbit Commerce APIs. The endpoints available in this section are Authorize initiates the OAuth 2.0 authorization flow by presenting the consent screen to the Fitbit user. Client Credentials initiates the Client Credentials Grant flow. This authorization flow does not support retrieving Fitbit user data. Introspect allows the application to retrieve the active state of an OAuth 2.0 token. OAuth2 Token exchanges the authorization code for the initial access token and refresh token. Refresh Token creates a new access token and refresh token for a user when the existing access token has expired. Revoke Token disables a user's authorization and all associated tokens. Activity Time Series Body
Context number 17 (score: 0.837576687): 
. . { "dateTime": "2020-01-26T07:38:30.000", "level": "wake", "seconds": 30 }, { "dateTime": "2020-01-26T07:44:00.000", "level": "wake", "seconds": 30 } ], "summary": { "deep": { "count": 4, "minutes": 46, "thirtyDayAvgMinutes": 0 }, "light": { "count": 19, "minutes": 133, "thirtyDayAvgMinutes": 0 }, "rem": { "count": 8, "minutes": 81, "thirtyDayAvgMinutes": 0 }, "wake": { "count": 21, "minutes": 40, "thirtyDayAvgMinutes": 0 } } }, "logId": 25647389514, "minutesAfterWakeup": 3, "minutesAsleep": 260, "minutesAwake": 40, "minutesToFallAsleep": 0, "logType": "auto_detected", "startTime": "2020-01-26T03:02:30.000", "timeInBed": 300, "type": "stages" } ] } Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated. This means that there may be a minor delay in the decrementing of remaining requests. This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code. List of codes are found in the Troubleshooting Guide . Status Message Description of the status code. Response Body Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure. Response Codes 200 A successful request. 400 The request had bad syntax or was inherently impossible to be satisfied. 401 The request requires user authentication.
Context number 18 (score: 0.836282611): 
Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization . Examples URL CURL Authorization Code Grant Flow POST https ://api.fitbit.com/oauth2/token Authorization: Basic <basic_token> Content-Type: application/x-www-form-urlencoded grant_type=authorization_code&code=<authorization_code> &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback Authorization Code Grant Flow with PKCE POST https ://api.fitbit.com/oauth2/token Authorization: Basic <basic_token> Content-Type: application/x-www-form-urlencoded grant_type=authorization_code&code=<authorization_code> &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback &code_verifier=<code_verifier_value> Authorization Code Grant Flow with PKCE (App Type: Client) POST https ://api.fitbit.com/oauth2/token Content-Type: application/x-www-form-urlencoded client_id=<client_id>&grant_type=authorization_code&code=<authorization_code> &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback &code_verifier=<code_verifier_value> Authorization Code Grant Flow curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -H "authorization: Basic <basic_token>" \ -d "grant_type=authorization_code&code=<authorization_code> \ &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback" Authorization Code Grant Flow with PKCE curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -H "authorization: Basic <basic_token>" \ -d "grant_type=authorization_code&code=<authorization_code> \ &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback \ &code_verifier=<code_verifier_value>" Authorization Code Grant Flow with PKCE (App Type: Client) curl -X POST "https ://api.fitbit.com/oauth2/token" \ -H "accept: application/json" \ -d "client_id=<client_id>&grant_type=authorization_code&code=<authorization_code> \ &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback \ &code_verifier=<code_verifier_value>" Response Description Example Response Element Name Description access_token The updated active access token.
Context number 19 (score: 0.835850894): 
Refresh Token The /oauth2/token endpoint can do the following: Exchange the authorization code for the initial access token and refresh token (See OAuth2 Token ). This process is required when using the Authorization Code Grant Flow. Obtain a new access token and refresh token when the existing access token has expired (See Refresh Token ). Initiate the Client Credentials authorization flow (See Client Credentials ). Request POST /oauth2/token Body Parameters grant_type required Supported: refresh_token Type: string refresh_token required The refresh token issued to you by Fitbit. Type: string client_id required for client apps This is your Fitbit API application ID from your settings on https://dev.fitbit.com . Apps set to type "client" should use this to pass their ID instead of the Authorization header. Type: string expires_in optional Specifies the desired access token lifetime. 28800 for 8 hours Supported: 28800 Type: integer Request Headers authorization (For use with server apps only) required Must be set to Basic followed by a space, then the Base64 encoded string of your application's client id and secret concatenated with a colon. For example, the Base64 encoded string, Y2xpZW50X2lkOmNsaWVudCBzZWNyZXQ= , is decoded as "client_id:client secret" . Token type: Basic accept optional The media type of the response content the client is expecting. Supported: application/json accept-language optional The measurement unit system to use for response values. See Localization . accept-locale optional The locale to use for response values. See Localization .
Context number 20 (score: 0.83523947): 
", "encodedId": "GGNJL9", "image100px": "https ://static0.fitbit.com/images/badges_new/100px/badge_daily_steps35k.png", "image125px": "https ://static0.fitbit.com/images/badges_new/125px/badge_daily_steps35k.png", "image300px": "https ://static0.fitbit.com/images/badges_new/300px/badge_daily_steps35k.png", "image50px": "https ://static0.fitbit.com/images/badges_new/badge_daily_steps35k.png", "image75px": "https ://static0.fitbit.com/images/badges_new/75px/badge_daily_steps35k.png", "marketingDescription": "You've walked 35,000 steps And earned the Hiking Boot badge!", "mobileDescription": "Woot, woot! There's no mountain you can't climb and no goal you can't get.", "name": "Hiking Boot (35,000 steps in a day)", "shareImage640px": "https ://static0.fitbit.com/images/badges_new/386px/shareLocalized/en_US/badge_daily_steps35k.png", "shareText": "I took 35,000 steps and earned the Hiking Boot badge! #Fitbit", "shortDescription": "35,000 steps", "shortName": "Hiking Boot", "timesAchieved": 1, "value": 35000 } ] } Response Headers content-type The media type of the response content being sent to the client. Supported: application/json fitbit-rate-limit-limit The quota number of calls. fitbit-rate-limit-remaining The number of calls remaining before hitting the rate limit. fitbit-rate-limit-reset The number of seconds until the rate limit resets. Note: The rate limit headers are approximate and asynchronously updated. This means that there may be a minor delay in the decrementing of remaining requests. This could result in your application receiving an unexpected 429 response if you don't track the total number of requests you make yourself. Response Type HTTP Status Code HTTP response code. List of codes are found in the Troubleshooting Guide . Status Message Description of the status code. Response Body Contains the JSON response to the API call.