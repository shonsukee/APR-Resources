---------------User Query---------------
def main() -> None:
    # True Min Run time should be the specified interval less the
    # regular sleep time
    real_min_run_time = MIN_RUN_TIME - SLEEP_TIME
    url = f"https://api.switch-bot.com/v1.0/devices/{DEVID}/status"
    headers = {'Authorization': APIKEY}
    influx_client = InfluxDBClient(url=INFLUX_URL, token=INFLUX_TOKEN,
                                   org=INFLUX_ORG)
    write_api = influx_client.write_api(write_options=SYNCHRONOUS)
    logger.info(f"Startup: {UA_STRING}")
    while True:
        (deg_f, rel_hum) = read_sensor(url, headers)
        watts = asyncio.run(read_consumption(PLUG_IP))
        record = [
            {
                "measurement": INFLUX_MEASUREMENT,
                "fields": {
                    "degF": deg_f,
                    "rH": rel_hum,
                    "power": watts
                }
            }
        ]
        write_api.write(bucket=INFLUX_BUCKET, record=record)
        if rel_hum >= HIGH:
            asyncio.run(plug_on(PLUG_IP))
            logger.info(f"Change state to ON, rH: {rel_hum}")
            # sleep for specified min run time, less standard sleep time,
            # we will still perform that sleep later anyhow.
            sleep(real_min_run_time)
        elif rel_hum < LOW:
            asyncio.run(plug_off(PLUG_IP))
            logger.info(f"Change state to OFF, rH: {rel_hum}")
        else:
            pass
        sleep(SLEEP_TIME)


---------------Response---------------
```python
def main() -> None:
    # True Min Run time should be the specified interval less the
    # regular sleep time
    real_min_run_time = MIN_RUN_TIME - SLEEP_TIME
    url = f"https://api.switch-bot.com/v1.1/devices/{DEVID}/status"
    
    # Adding additional headers as per latest specifications
    timestamp = int(round(time.time() * 1000))
    nonce = uuid.uuid4()
    string_to_sign = '{}{}{}'.format(APIKEY, timestamp, nonce)
    signature = base64.b64encode(hmac.new(SECRET_KEY.encode('utf-8'), string_to_sign.encode('utf-8'), digestmod=hashlib.sha256).digest())
    
    headers = {
        'Authorization': APIKEY,
        'sign': signature.decode('utf-8'),
        't': str(timestamp),
        'nonce': str(nonce)
    }

    influx_client = InfluxDBClient(url=INFLUX_URL, token=INFLUX_TOKEN,
                                   org=INFLUX_ORG)
    write_api = influx_client.write_api(write_options=SYNCHRONOUS)
    logger.info(f"Startup: {UA_STRING}")
    while True:
        (deg_f, rel_hum) = read_sensor(url, headers)
        watts = asyncio.run(read_consumption(PLUG_IP))
        record = [
            {
                "measurement": INFLUX_MEASUREMENT,
                "fields": {
                    "degF": deg_f,
                    "rH": rel_hum,
                    "power": watts
                }
            }
        ]
        write_api.write(bucket=INFLUX_BUCKET, record=record)
        if rel_hum >= HIGH:
            asyncio.run(plug_on(PLUG_IP))
            logger.info(f"Change state to ON, rH: {rel_hum}")
            # sleep for specified min run time, less standard sleep time,
            # we will still perform that sleep later anyhow.
            sleep(real_min_run_time)
        elif rel_hum < LOW:
            asyncio.run(plug_off(PLUG_IP))
            logger.info(f"Change state to OFF, rH: {rel_hum}")
        else:
            pass
        sleep(SLEEP_TIME)
```

---------------Similarity Score---------------
0.7346372328358207

---------------Relevant Context---------------
---------------latest_natural_language---------------

Context number 1 (score: 0.766549349): 
Plug Mini (JP) 
 Color Bulb 
 Strip Light 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Ceiling Light 
 Ceiling Light Pro 
 Keypad 
 Keypad Touch 
 Blind Tilt 
 Battery Circulator Fan 
 
 
 Command set for virtual infrared remote devices 
 Path parameters 
 Request body parameters 
 Response 
 Errors 
 Sample 
 
 Floor Cleaning Robot S10 example 
 Keypad example 
 Bot example 
 Infrared remote device example 
 
 
 
 
 
 
 Scenes 
 
 Get scene list 
 
 Description 
 Response 
 Errors 
 Sample 
 
 Get all scenes 
 
 
 
 
 Execute manual scenes 
 
 Description 
 Path parameters 
 Errors 
 Sample 
 
 Execute a scene 
 
 
 
 
 
 
 Webhook 
 
 Configure webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Get webhook configuration 
 
 Description 
 Request 
 
 Request body parameters 
 queryUrl 
 queryDetails 
 
 
 Response 
 
 queryUrl 
 queryDetails 
 
 
 
 
 Update webhook configuration 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Delete webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Receive events from webhook 
 
 Bot 
 Curtain 
 Curtain 3 
 Motion Sensor 
 Contact Sensor 
 Water Leak Detector 
 Meter 
 Meter Plus 
 Outdoor Meter 
 Lock 
 Lock Pro 
 Indoor Cam 
 Pan/Tilt Cam 
 Color Bulb 
 LED Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Ceiling Light 
 Ceiling Light Pro 
 Keypad 
 
 Create a passcode 
 Delete a passcode 
 
 
 Keypad Touch 
 
 Create a passcode 
 Delete a passcode 
 
 
 Hub 2 
 Battery Circulator Fan 
 
 
 
 
 
 Introduction 
 This document describes a collection of SwitchBot API methods, examples, and best practices for, but not limited to, IoT hobbyists, developers, and gurus to make their own smart home programs or applications. 
 About the New Version 
 We will stop adding support for new products on  v1.0  as we release  v1.1 .
Context number 2 (score: 0.763875): 
SwitchBot API v1.1 
 
 Introduction 
 About the New Version 
 Getting Started 
 Authentication 
 
 Open Token and Secret Key 
 How to Sign? 
 
 Python 2 example code 
 Python 3 example code 
 JavaScript example code 
 C# example code 
 Java 11+ example code 
 PHP example code 
 
 
 
 
 Glossary 
 API Usage 
 
 Host Domain 
 Sending a Request 
 
 Content-Type 
 Request limit 
 
 
 Request Header 
 Standard HTTP Error Codes 
 
 
 Devices 
 
 Get device list 
 
 Description 
 Responses 
 
 Bot 
 Curtain 
 Curtain 3 
 Hub/Hub Plus/Hub Mini/Hub 2 
 Meter 
 Meter Plus 
 Outdoor Meter 
 Lock 
 Lock Pro 
 Keypad 
 Keypad Touch 
 Remote 
 Motion Sensor 
 Contact Sensor 
 Water Leak Detector 
 Ceiling Light 
 Ceiling Light Pro 
 Plug Mini (US) 
 Plug Mini (JP) 
 Plug 
 Strip Light 
 Color Bulb 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Humidifier 
 Indoor Cam 
 Pan/Tilt Cam 
 Pan/Tilt Cam 2K 
 Blind Tilt 
 Battery Circulator Fan 
 Virtual infrared remote devices 
 
 
 Sample 
 
 Get all devices 
 
 
 
 
 Get device status 
 
 Description 
 Path parameters 
 Responses 
 
 Bot 
 Curtain 
 Curtain 3 
 Meter 
 Meter Plus 
 Outdoor Meter 
 Lock 
 Lock Pro 
 Keypad 
 Keypad Touch 
 Motion Sensor 
 Contact Sensor 
 Water Leak Detector 
 Ceiling Light 
 Ceiling Light Pro 
 Plug Mini (US) 
 Plug Mini (JP) 
 Plug 
 Strip Light 
 Color Bulb 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Humidifier 
 Blind Tilt 
 Hub 2 
 Battery Circulator Fan 
 
 
 Sample 
 
 SwitchBot Meter example 
 SwitchBot Curtain example 
 
 
 
 
 Send device control commands 
 
 Description 
 Command set for physical devices 
 
 Bot 
 Curtain 
 Curtain 3 
 Lock 
 Lock Pro 
 Humidifier 
 Plug 
 Plug Mini (US) 
 Plug Mini (JP) 
 Color Bulb 
 Strip Light 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Ceiling
Context number 3 (score: 0.763477504): 
Plug Mini (JP) 
 Color Bulb 
 Strip Light 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Ceiling Light 
 Ceiling Light Pro 
 Keypad 
 Keypad Touch 
 Blind Tilt 
 Battery Circulator Fan 
 
 
 Command set for virtual infrared remote devices 
 Path parameters 
 Request body parameters 
 Response 
 Errors 
 Sample 
 
 Floor Cleaning Robot S10 example 
 Keypad example 
 Bot example 
 Infrared remote device example 
 
 
 
 
 
 
 Scenes 
 
 Get scene list 
 
 Description 
 Response 
 Errors 
 Sample 
 
 Get all scenes 
 
 
 
 
 Execute manual scenes 
 
 Description 
 Path parameters 
 Errors 
 Sample 
 
 Execute a scene 
 
 
 
 
 
 
 Webhook 
 
 Configure webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Get webhook configuration 
 
 Description 
 Request 
 
 Request body parameters 
 queryUrl 
 queryDetails 
 
 
 Response 
 
 queryUrl 
 queryDetails 
 
 
 
 
 Update webhook configuration 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Delete webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Receive events from webhook 
 
 Bot 
 Curtain 
 Curtain 3 
 Motion Sensor 
 Contact Sensor 
 Water Leak Detector 
 Meter 
 Meter Plus 
 Outdoor Meter 
 Lock 
 Lock Pro 
 Indoor Cam 
 Pan/Tilt Cam 
 Color Bulb 
 LED Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Mini Robot Vacuum K10+ 
 Mini Robot Vacuum K10+ Pro 
 Floor Cleaning Robot S10 
 Ceiling Light 
 Ceiling Light Pro 
 Keypad 
 
 Create a passcode 
 Delete a passcode 
 
 
 Keypad Touch 
 
 Create a passcode 
 Delete a passcode 
 
 
 Hub 2 
 Battery Circulator Fan 
 
 
 
 
 
 Introduction 
 This document describes a collection of SwitchBot API methods, examples, and best practices for, but not limited to, IoT hobbyists, developers, and gurus to make their own smart home programs or applications. 
 About the New Version 
 We will stop adding support for new products on   as we release  .
Context number 4 (score: 0.76309365): 
, the number of cycles,  , in theory. 
 
 
 Floor Cleaning Robot S10 
 command 
 addWaterForHumi 
 default 
 refill the mind blowing Evaporative Humidifier (Auto-refill). 
 
 
 Floor Cleaning Robot S10 
 command 
 pause 
 default 
 pause. 
 
 
 Floor Cleaning Robot S10 
 command 
 dock 
 default 
 return to Auto-empty Station and charge. 
 
 
 Floor Cleaning Robot S10 
 command 
 setVolume 
 
 set volume,  
 
 
 Floor Cleaning Robot S10 
 command 
 selfClean 
  or   or  
 mode  , wash the mop. mode  , dry itself.  mode  , terminate. 
 
 
 Floor Cleaning Robot S10 
 command 
 changeParam 
 {"fanLevel": fan_level_int, "waterLevel": water_level_int, "times": clean_cycle_int} 
 , the vacuum level,  . , the mop moisture level,  . , the number of cycles,  , in theory. 
 
 
 
 Ceiling Light 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Ceiling Light 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Ceiling Light 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Ceiling Light 
 command 
 toggle 
 default 
 toggle state 
 
 
 Ceiling Light 
 command 
 setBrightness 
 
 set brightness 
 
 
 Ceiling Light 
 command 
 setColorTemperature 
 
 set the color temperature 
 
 
 
 Ceiling Light Pro 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Ceiling Light Pro 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Ceiling Light Pro 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Ceiling Light Pro 
 command 
 toggle 
 default 
 toggle state 
 
 
 Ceiling Light Pro 
 command 
 setBrightness 
 
 set brightness 
 
 
 Ceiling Light Pro 
 command 
 setColorTemperature 
 
 set the color temperature 
 
 
 
 Keypad 
 The control commands for this product work differently than the other products. Due to security concerns, the passcodes are stored locally. This mechanism dramatically prolongs the time needed to successfully create a passcode and get the correct result through the Web API. Hence, the actual results of the following commands are returned from the SwitchBot server asynchronously and are delivered through a webhook. 
 You need to configure a webhook to receive the correct result. Refer to this product's webhook definition.
Context number 5 (score: 0.751144052): 
Plug 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 
 Plug Mini (US) 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug Mini (US) 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug Mini (US) 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Plug Mini (US) 
 command 
 toggle 
 default 
 toggle state 
 
 
 
 Plug Mini (JP) 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug Mini (JP) 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug Mini (JP) 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Plug Mini (JP) 
 command 
 toggle 
 default 
 toggle state 
 
 
 
 Color Bulb 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Color Bulb 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Color Bulb 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Color Bulb 
 command 
 toggle 
 default 
 toggle state 
 
 
 Color Bulb 
 command 
 setBrightness 
 {1-100} 
 set brightness 
 
 
 Color Bulb 
 command 
 setColor 
 "{0-255}:{0-255}:{0-255}" 
 set RGB color value 
 
 
 Color Bulb 
 command 
 setColorTemperature 
 {2700-6500} 
 set color temperature 
 
 
 
 Strip Light 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Strip Light 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Strip Light 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Strip Light 
 command 
 toggle 
 default 
 toggle state 
 
 
 Strip Light 
 command 
 setBrightness 
 {1-100} 
 set brightness 
 
 
 Strip Light 
 command 
 setColor 
 "{0-255}:{0-255}:{0-255}" 
 set RGB color value 
 
 
 
 Robot Vacuum Cleaner S1 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description
Context number 6 (score: 0.750269532): 
but not limited to, IoT hobbyists, developers, and gurus to make their own smart home programs or applications. 
 About the New Version 
 We will stop adding support for new products on   as we release  . 
 Hence, we strongly recommend all SwitchBot users to migrate to the new API version because we have improved the authentication method. This will make the communication between your server and the SwitchBot server more secure. 
 Getting Started 
 Please follow these steps, 
 
 
 Download the SwitchBot app on App Store or Google Play Store 
 
 
 Register a SwitchBot account and log in into your account 
 
 
 Generate an Open Token within the app
For app version ≥ V9.0,
a) Go to Profile > Preferences > About
b) Tap App Version 10 times. Developer Options will show up
c) Tap Developer Options
d) Tap Get Token 
 
 
 For app version < V9.0,
a) Go to Profile > Preferences
b) Tap App Version 10 times. Developer Options will show up
c) Tap Developer Options
d) Tap Get Token 
 
 Roll up your sleeves and get your hands dirty with SwitchBot OpenAPI! 
 
 Authentication 
 Open Token and Secret Key 
 Note: You must update the app to the latest version,   or later, in order to get the secret key. 
 In SwitchBot API  , the authentication method has been improved. In order to gain access to private data through the API, you must generate a unique signature using a token and a secret key. When you make a request, the Authorization token and signature will be validated simultaneously. 
 You as a developer will then be able to add, delete, edit, and look up your data including profile data and data associated with the devices that have been added to your SwitchBot account. 
 To continue to use SwitchBot API  , refer to the legacy document. 
 How to Sign? 
 We have attached some scripts for you to quickly generate a sign. If you prefer to write your own script or routine, here is the procedure.
Context number 7 (score: 0.749766529): 
set to Auto Mode, 101, set atomization efficiency to 34%, 102, set atomization efficiency to 67%, 103, set atomization efficiency to 100% 
 
 
 
 Plug 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 
 Plug Mini (US) 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug Mini (US) 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug Mini (US) 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Plug Mini (US) 
 command 
 toggle 
 default 
 toggle state 
 
 
 
 Plug Mini (JP) 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Plug Mini (JP) 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug Mini (JP) 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Plug Mini (JP) 
 command 
 toggle 
 default 
 toggle state 
 
 
 
 Color Bulb 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Color Bulb 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Color Bulb 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Color Bulb 
 command 
 toggle 
 default 
 toggle state 
 
 
 Color Bulb 
 command 
 setBrightness 
 
 set brightness 
 
 
 Color Bulb 
 command 
 setColor 
 
 set RGB color value 
 
 
 Color Bulb 
 command 
 setColorTemperature 
 
 set color temperature 
 
 
 
 Strip Light 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Strip Light 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Strip Light 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Strip Light 
 command 
 toggle 
 default 
 toggle state 
 
 
 Strip Light 
 command 
 setBrightness 
 
 set brightness 
 
 
 Strip Light 
 command 
 setColor 
 
 set RGB color value 
 
 
 
 Robot Vacuum Cleaner S1 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Robot Vacuum Cleaner S1 
 command 
 start 
 default 
 start vacuuming 
 
 
 Robot Vacuum Cleaner S1 
 command 
 stop 
 default 
 stop vacuuming 
 
 
 Robot Vacuum Cleaner S1 
 command 
 dock 
 default 
 return to charging dock 
 
 
 Robot Vacuum Cleaner S1 
 command 
 PowLevel 
 
 set suction power level: 0 (Quiet),
Context number 8 (score: 0.747280657): 
developers, and gurus to make their own smart home programs or applications. 
 About the New Version 
 We will stop adding support for new products on  v1.0  as we release  v1.1 . 
 Hence, we strongly recommend all SwitchBot users to migrate to the new API version because we have improved the authentication method. This will make the communication between your server and the SwitchBot server more secure. 
 Getting Started 
 Please follow these steps, 
 
 
 Download the SwitchBot app on App Store or Google Play Store 
 
 
 Register a SwitchBot account and log in into your account 
 
 
 Generate an Open Token within the app
For app version ≥ V9.0,
a) Go to Profile > Preferences > About
b) Tap App Version 10 times. Developer Options will show up
c) Tap Developer Options
d) Tap Get Token 
 
 
 For app version < V9.0,
a) Go to Profile > Preferences
b) Tap App Version 10 times. Developer Options will show up
c) Tap Developer Options
d) Tap Get Token 
 
 Roll up your sleeves and get your hands dirty with SwitchBot OpenAPI! 
 
 Authentication 
 Open Token and Secret Key 
 Note: You must update the app to the latest version,  V6.14  or later, in order to get the secret key. 
 In SwitchBot API  v1.1 , the authentication method has been improved. In order to gain access to private data through the API, you must generate a unique signature using a token and a secret key. When you make a request, the Authorization token and signature will be validated simultaneously. 
 You as a developer will then be able to add, delete, edit, and look up your data including profile data and data associated with the devices that have been added to your SwitchBot account. 
 To continue to use SwitchBot API  v1.0 , refer to the legacy document. 
 How to Sign? 
 We have attached some scripts for you to quickly generate a sign. If you prefer to write your own script or routine, here is the procedure.
Context number 9 (score: 0.740594387): 
How to Sign? 
 We have attached some scripts for you to quickly generate a sign. If you prefer to write your own script or routine, here is the procedure. 
 
 Print the 13 digit timestamp and concatenate it with your  
 Create a signature using your   and the string produced in the previous step 
 Convert the signature to upper case 
 
 For instance, 
 
 Python 2 example code 
 
 Python 3 example code 
 
 JavaScript example code 
 
 C# example code 
 
 Java 11+ example code 
 
 PHP example code 
 
 Glossary 
 The following table provides definitions to the terms to be frequently mentioned in the subsequent sections. 
 
 
 
 Term 
 Description 
 Model No. 
 Availability 
 
 
 
 
 Hub Mini 
 Short for SwitchBot Hub Mini 
 W0202200 
 
 
 
 Hub Plus 
 Short for SwitchBot Hub Plus 
 SwitchBot Hub S1 
 
 
 
 Hub 2 
 Short for SwitchBot Hub 2 
 W3202100 
 
 
 
 Bot 
 Short for SwitchBot Bot 
 SwitchBot S1 
 
 
 
 Curtain 
 Short for SwitchBot Curtain 
 W0701600 
 
 
 
 Curtain 3 
 Short for SwitchBot Curtain 3 
 W2400000 
 
 
 
 Plug 
 Short for SwitchBot Plug 
 SP11 
 Currently only available in Japan 
 
 
 Meter 
 Short for SwitchBot Thermometer and Hygrometer 
 SwitchBot MeterTH S1 
 
 
 
 Meter Plus (JP) 
 Short for SwitchBot Thermometer and Hygrometer Plus (JP). 
 W2201500 
 Only available in Japan 
 
 
 Meter Plus (US) 
 Short for SwitchBot Thermometer and Hygrometer Plus (US) 
 W2301500 
 Only available in US 
 
 
 Outdoor Meter 
 Short for Indoor/Outdoor Thermo-Hygrometer 
 W3400010 
 
 
 
 Motion Sensor 
 Short for SwitchBot Motion Sensor 
 W1101500 
 
 
 
 Contact Sensor 
 Short for SwitchBot Contact Sensor 
 W1201500 
 
 
 
 Water Leak Detector 
 Short for SwitchBot Water Leak Detector 
 W4402000 
 
 
 
 Color Bulb 
 Short for SwitchBot Color Bulb 
 W1401400 
 
 
 
 Strip Light 
 Short for SwitchBot LED Strip Light 
 W1701100 
 
 
 
 Plug Mini (US) 
 Short for SwitchBot Plug Mini (US) 
 W1901400 and W1901401 
 Only available in US 
 
 
 Plug Mini (JP) 
 Short for SwitchBot Plug Mini (JP)
Context number 10 (score: 0.734368384): 
How to Sign? 
 We have attached some scripts for you to quickly generate a sign. If you prefer to write your own script or routine, here is the procedure. 
 
 Print the 13 digit timestamp and concatenate it with your  token 
 Create a signature using your  secret  and the string produced in the previous step 
 Convert the signature to upper case 
 
 For instance, 
 
 Python 2 example code 
 
 Python 3 example code 
 
 JavaScript example code 
 
 C# example code 
 
 Java 11+ example code 
 
 PHP example code 
 
 Glossary 
 The following table provides definitions to the terms to be frequently mentioned in the subsequent sections. 
 
 
 
 Term 
 Description 
 Model No. 
 Availability 
 
 
 
 
 Hub Mini 
 Short for SwitchBot Hub Mini 
 W0202200 
 
 
 
 Hub Plus 
 Short for SwitchBot Hub Plus 
 SwitchBot Hub S1 
 
 
 
 Hub 2 
 Short for SwitchBot Hub 2 
 W3202100 
 
 
 
 Bot 
 Short for SwitchBot Bot 
 SwitchBot S1 
 
 
 
 Curtain 
 Short for SwitchBot Curtain 
 W0701600 
 
 
 
 Curtain 3 
 Short for SwitchBot Curtain 3 
 W2400000 
 
 
 
 Plug 
 Short for SwitchBot Plug 
 SP11 
 Currently only available in Japan 
 
 
 Meter 
 Short for SwitchBot Thermometer and Hygrometer 
 SwitchBot MeterTH S1 
 
 
 
 Meter Plus (JP) 
 Short for SwitchBot Thermometer and Hygrometer Plus (JP). 
 W2201500 
 Only available in Japan 
 
 
 Meter Plus (US) 
 Short for SwitchBot Thermometer and Hygrometer Plus (US) 
 W2301500 
 Only available in US 
 
 
 Outdoor Meter 
 Short for Indoor/Outdoor Thermo-Hygrometer 
 W3400010 
 
 
 
 Motion Sensor 
 Short for SwitchBot Motion Sensor 
 W1101500 
 
 
 
 Contact Sensor 
 Short for SwitchBot Contact Sensor 
 W1201500 
 
 
 
 Water Leak Detector 
 Short for SwitchBot Water Leak Detector 
 W4402000 
 
 
 
 Color Bulb 
 Short for SwitchBot Color Bulb 
 W1401400 
 
 
 
 Strip Light 
 Short for SwitchBot LED Strip Light 
 W1701100 
 
 
 
 Plug Mini (US) 
 Short for SwitchBot Plug Mini (US) 
 W1901400 and W1901401 
 Only available in US 
 
 
 Plug Mini (JP) 
 Short for SwitchBot Plug
Context number 11 (score: 0.730234861): 
"ON" or "OFF" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Plug Mini (JP) 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 powerState 
 String 
 the current power state of the device, "ON" or "OFF" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Robot Vacuum Cleaner S1 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 attributes of the context object. the type of the device 
 
 
 deviceMac 
 String 
 attributes of the context object. the MAC address of the device 
 
 
 workingStatus 
 String 
 attributes of the context object. the working status of the device.  StandBy ,  Clearing ,  Paused ,  GotoChargeBase ,  Charging ,  ChargeDone ,  Dormant ,  InTrouble ,  InRemoteControl , or  InDustCollecting 
 
 
 onlineStatus 
 String 
 attributes of the context object. the connection status of the device.  online  or  offline 
 
 
 battery 
 Integer 
 attributes of the context object. the battery level, range from 0 to 100 
 
 
 timeOfSample 
 Long 
 attributes of the context object. the time stamp when the event is sent 
 
 
 
 
 Robot Vacuum Cleaner S1 Plus 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 attributes of the context object. the type of the device 
 
 
 deviceMac 
 String 
 attributes of the context object. the MAC address of the device 
 
 
 workingStatus 
 String 
 attributes of the context object. the working status of the device.
Context number 12 (score: 0.729958892): 
Battery Circulator Fan 
 W3800510 
 
 
 
 
  Cloud Services 
 
 Important note: Beyond V9.0, there will NOT be a Cloud Services option in the app. You will see Third-party Services instead. Please read this article for more information,  https://support.switch-bot.com/hc/en-us/articles/7257579858455 
 
 A SwitchBot app feature, which appears in the app <V9.0 that 
 
 Enables SwitchBot products to be discovered and communicated with third-party services such as Home Assistant, Alexa, Google Home, IFTTT, SmartThings, and so forth 
 Allows users to create customized smart scenes and  widgets. For BLE-based devices such as Bot and Curtain 
 You MUST first add a SwitchBot Hub such as Hub 2, Hub Mini with Matter Enabled, or Hub Mini 
 Then enable Cloud Services on the Settings page in order to make use of the web API! 
 
 API Usage 
 Host Domain 
 
 Sending a Request 
 The following request types are supported, 
 
 GET 
 PUT 
 POST 
 DELETE 
 
 Content-Type 
 For   requests, use   as the  
 Request limit 
 The amount of API calls per day is limited to  10000  times. Going over that limit will return "Unauthorized." 
 Request Header 
 The following parameters need to be included into the header, 
 
 
 
 Parameter 
 Type 
 Location 
 Required 
 Description 
 
 
 
 
 Authorization 
 String 
 header 
 Yes 
 Open Token acquired 
 
 
 sign 
 String 
 header 
 Yes 
 A signature generated from the token and secret key using a specific algorithm. 
 
 
 t 
 Long 
 header 
 Yes 
 A 13 digit timestamp (standard time). 
 
 
 nonce 
 Long 
 header 
 Yes 
 A random UUID generated by developers themselves to blend into the string to sign. 
 
 
 
 Standard HTTP Error Codes 
 The following table lists the most common HTTP error response, 
 
 
 
 Code 
 Name 
 Description 
 
 
 
 
 400 
 Bad Request 
 The client has issued an invalid request. This is commonly used to specify validation errors in a request payload. 
 
 
 401 
 Unauthorized 
 Authorization for the API is required, but the request has not been authenticated. 
 
 
 403 
 Forbidden 
 The request has been authenticated but does not have appropriate permissions, or a requested resource is not found. 
 
 
 404 
 Not Found 
 Specifies the requested path does not exist.
Context number 13 (score: 0.727128446): 
Physical devices refer to the following SwitchBot products, 
 
 Bot 
 Plug 
 Curtain 
 Meter 
 Motion Sensor 
 Contact Sensor 
 Color Bulb 
 Humidifier 
 Smart Fan 
 Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 Lock 
 Meter Plus (JP) 
 Meter Plus (US) 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Keypad (MUST enable Cloud Service first) 
 Keypad Touch (MUST enable Cloud Service first) 
 Ceiling Light 
 Ceiling Light Pro 
 Hub 2 
 Outdoor Meter 
 Battery Circulator Fan 
 Lock Pro 
 Floor Cleaning Robot S10 
 Water Leak Detector 
 new  Mini Robot Vacuum K10+ 
 new  Mini Robot Vacuum K10+ Pro 
 
 Path parameters 
 
 
 
 Name 
 Type 
 Required 
 Description 
 
 
 
 
 deviceId 
 String 
 Yes 
 device ID 
 
 
 
 Responses 
 The response is basically a JSON object, which contains the following properties, 
 
 
 
 Key Name 
 Value Type 
 
 
 
 
 statusCode 
 Integer 
 
 
 message 
 String 
 
 
 body 
 Object 
 
 
 
 The reponses may contain the following codes and message, 
 
 
 
 Status Code 
 Body Content 
 Message 
 Description 
 
 
 
 
 100 
 Device list object 
 success 
 Returns an object that contains two device lists 
 
 
 n/a 
 n/a 
 Unauthorized 
 Http 401 Error. User permission is denied due to invalid token. 
 
 
 190 
 n/a 
 System error 
 Device internal error due to device states not synchronized with server 
 
 
 
 The  body  object contains the following properties, 
 Bot 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.  Bot 
 
 
 power 
 String 
 ON/OFF state 
 
 
 battery 
 Integer 
 the current battery level, 0-100 
 
 
 version 
 String 
 the current firmware version, e.g. V6.3 
 
 
 deviceMode 
 String 
 pressMode ,  switchMode , or  customizeMode 
 
 
 hubDeviceId 
 String 
 device's parent Hub ID 
 
 
 
 Curtain 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.
Context number 14 (score: 0.726807177): 
Physical devices refer to the following SwitchBot products, 
 
 Bot 
 Plug 
 Curtain 
 Meter 
 Motion Sensor 
 Contact Sensor 
 Color Bulb 
 Humidifier 
 Smart Fan 
 Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 Lock 
 Meter Plus (JP) 
 Meter Plus (US) 
 Robot Vacuum Cleaner S1 
 Robot Vacuum Cleaner S1 Plus 
 Keypad (MUST enable Cloud Service first) 
 Keypad Touch (MUST enable Cloud Service first) 
 Ceiling Light 
 Ceiling Light Pro 
 Hub 2 
 Outdoor Meter 
 Battery Circulator Fan 
 Lock Pro 
 Floor Cleaning Robot S10 
 Water Leak Detector 
  Mini Robot Vacuum K10+ 
  Mini Robot Vacuum K10+ Pro 
 
 Path parameters 
 
 
 
 Name 
 Type 
 Required 
 Description 
 
 
 
 
 deviceId 
 String 
 Yes 
 device ID 
 
 
 
 Responses 
 The response is basically a JSON object, which contains the following properties, 
 
 
 
 Key Name 
 Value Type 
 
 
 
 
 statusCode 
 Integer 
 
 
 message 
 String 
 
 
 body 
 Object 
 
 
 
 The reponses may contain the following codes and message, 
 
 
 
 Status Code 
 Body Content 
 Message 
 Description 
 
 
 
 
 100 
 Device list object 
 success 
 Returns an object that contains two device lists 
 
 
 n/a 
 n/a 
 Unauthorized 
 Http 401 Error. User permission is denied due to invalid token. 
 
 
 190 
 n/a 
 System error 
 Device internal error due to device states not synchronized with server 
 
 
 
 The   object contains the following properties, 
 Bot 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.  Bot 
 
 
 power 
 String 
 ON/OFF state 
 
 
 battery 
 Integer 
 the current battery level, 0-100 
 
 
 version 
 String 
 the current firmware version, e.g. V6.3 
 
 
 deviceMode 
 String 
 pressMode ,  switchMode , or  customizeMode 
 
 
 hubDeviceId 
 String 
 device's parent Hub ID 
 
 
 
 Curtain 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.
Context number 15 (score: 0.725168347): 
Circulator Fan 
 W3800510 
 
 
 
 
 Legacy  Cloud Services 
 
 Important note: Beyond V9.0, there will NOT be a Cloud Services option in the app. You will see Third-party Services instead. Please read this article for more information,  https://support.switch-bot.com/hc/en-us/articles/7257579858455 
 
 A SwitchBot app feature, which appears in the app <V9.0 that 
 
 Enables SwitchBot products to be discovered and communicated with third-party services such as Home Assistant, Alexa, Google Home, IFTTT, SmartThings, and so forth 
 Allows users to create customized smart scenes and  widgets. For BLE-based devices such as Bot and Curtain 
 You MUST first add a SwitchBot Hub such as Hub 2, Hub Mini with Matter Enabled, or Hub Mini 
 Then enable Cloud Services on the Settings page in order to make use of the web API! 
 
 API Usage 
 Host Domain 
 
 Sending a Request 
 The following request types are supported, 
 
 GET 
 PUT 
 POST 
 DELETE 
 
 Content-Type 
 For  POST  requests, use  application/json; charset=utf8  as the  Content-Type 
 Request limit 
 The amount of API calls per day is limited to  10000  times. Going over that limit will return "Unauthorized." 
 Request Header 
 The following parameters need to be included into the header, 
 
 
 
 Parameter 
 Type 
 Location 
 Required 
 Description 
 
 
 
 
 Authorization 
 String 
 header 
 Yes 
 Open Token acquired 
 
 
 sign 
 String 
 header 
 Yes 
 A signature generated from the token and secret key using a specific algorithm. 
 
 
 t 
 Long 
 header 
 Yes 
 A 13 digit timestamp (standard time). 
 
 
 nonce 
 Long 
 header 
 Yes 
 A random UUID generated by developers themselves to blend into the string to sign. 
 
 
 
 Standard HTTP Error Codes 
 The following table lists the most common HTTP error response, 
 
 
 
 Code 
 Name 
 Description 
 
 
 
 
 400 
 Bad Request 
 The client has issued an invalid request. This is commonly used to specify validation errors in a request payload. 
 
 
 401 
 Unauthorized 
 Authorization for the API is required, but the request has not been authenticated. 
 
 
 403 
 Forbidden 
 The request has been authenticated but does not have appropriate permissions, or a requested resource is not found. 
 
 
 404 
 Not Found 
 Specifies the requested path does not exist.
Context number 16 (score: 0.724836528): 
the unit of temperature is in celsius;  modes include 0/1 (auto), 2 (cool), 3 (dry), 4 (fan), 5 (heat);  fan speed includes 1 (auto), 2 (low), 3 (medium), 4 (high);  power state includes on and off 
 
 
 
 
 
 
 
 
 
 TV, IPTV/Streamer,  Set Top Box 
 command 
 SetChannel 
 {channel number}, e.g. 15 
 set the TV channel to switch to 
 
 
 
 command 
 volumeAdd 
 default 
 volume up 
 
 
 
 command 
 volumeSub 
 default 
 volume down 
 
 
 
 command 
 channelAdd 
 default 
 next channel 
 
 
 
 command 
 channelSub 
 default 
 previous channel 
 
 
 DVD, Speaker 
 command 
 setMute 
 default 
 mute/unmute 
 
 
 
 command 
 FastForward 
 default 
 fast forward 
 
 
 
 command 
 Rewind 
 default 
 rewind 
 
 
 
 command 
 Next 
 default 
 next track 
 
 
 
 command 
 Previous 
 default 
 last track 
 
 
 
 command 
 Pause 
 default 
 pause 
 
 
 
 command 
 Play 
 default 
 play/resume 
 
 
 
 command 
 Stop 
 default 
 stop 
 
 
 Speaker 
 command 
 volumeAdd 
 default 
 volume up 
 
 
 
 command 
 volumeSub 
 default 
 volume down 
 
 
 Fan 
 command 
 swing 
 default 
 swing 
 
 
 
 command 
 timer 
 default 
 set timer 
 
 
 
 command 
 lowSpeed 
 default 
 set fan speed to low 
 
 
 
 command 
 middleSpeed 
 default 
 set fan speed to medium 
 
 
 
 command 
 highSpeed 
 default 
 set fan speed to high 
 
 
 Light 
 command 
 brightnessUp 
 default 
 brightness up 
 
 
 
 command 
 brightnessDown 
 default 
 brightness down 
 
 
 
 
 Note: Most of the devices support   or  , which are case-sensitive. For infrared remote devices, when you have created customized buttons, you must set   to  , otherwise the command will not work.   needs to be set to the name of the customized button.
Context number 17 (score: 0.724567115): 
User permission is denied due to invalid token. 
 
 
 190 
 Device internal error due to device states not synchronized with server 
 
 
 
 Sample 
 Execute a scene 
 Request 
 
 Response 
 
 Webhook 
 Configure webhook 
 Description 
 Configure the url that all the webhook events will be sent to 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 url 
 String 
 the url where all the events are sent to 
 
 
 deviceList 
 String 
 the list of device ids, currently only supports "ALL" 
 
 
 
 Head 
 
 Body 
 
 Response 
 Sample 
 
 Get webhook configuration 
 Description 
 Get the current configuration info of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions, currently supports "queryUrl", "queryDetails" 
 
 
 url 
 String 
 the url where all the events are sent to. you need to specify the url when using queryDetails 
 
 
 
 queryUrl 
 Head 
 
 Body 
 
 queryDetails 
 Head 
 
 Body 
 
 Response 
 queryUrl 
 
 queryDetails 
 
 Update webhook configuration 
 Description 
 Update the configuration of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 config 
 Object 
 the configuration details you want to update. you can change the current url or enable/disable the webhook. refer to the example below 
 
 
 
 Head 
 
 Body 
 
 Response 
 
 Delete webhook 
 Description 
 Delete the configuration of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 url 
 String 
 the url where all the events are sent to 
 
 
 
 Head 
 
 Body 
 
 Response 
 
 Receive events from webhook 
 When an event gets triggered, SwitchBot server will send a  POST  request to the url you have configured. Refer to the table below for a list of products that support webhook.
Context number 18 (score: 0.724548936): 
online  or  offline 
 
 
 battery 
 Integer 
 the current battery level  
 
 
 waterBaseBattery 
 Integer 
 the current battery level  
 
 
 taskType 
 String 
 the current task in progress.  standBy ,  explore ,  cleanAll ,  cleanArea ,  cleanRoom ,  fillWater ,  deepWashing ,  backToCharge ,  markingWaterBase ,  drying ,  collectDust ,  remoteControl ,  cleanWithExplorer ,  fillWaterForHumi ,  markingHumi 
 
 
 
 Humidifier 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.  Humidifier 
 
 
 hubDeviceId 
 String 
 device's parent Hub ID.  000000000000  when the device itself is a Hub or it is connected through Wi-Fi. 
 
 
 power 
 String 
 ON/OFF state 
 
 
 humidity 
 Integer 
 humidity percentage 
 
 
 temperature 
 Float 
 temperature in celsius 
 
 
 nebulizationEfficiency 
 Integer 
 atomization efficiency percentage 
 
 
 auto 
 Boolean 
 determines if a Humidifier is in Auto Mode or not 
 
 
 childLock 
 Boolean 
 determines if a Humidifier's safety lock is on or not 
 
 
 sound 
 Boolean 
 determines if a Humidifier is muted or not 
 
 
 lackWater 
 Boolean 
 determines if the water tank is empty or not 
 
 
 
 Blind Tilt 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.  Blind Tilt 
 
 
 hubDeviceId 
 String 
 device's parent Hub ID 
 
 
 version 
 Integer 
 the firmware version of the device 
 
 
 calibrate 
 Boolean 
 determines if the open and the closed positions have been properly calibrated or not 
 
 
 group 
 Boolean 
 determines if a Blind Tilt device is paired with or grouped with one or more devices of the same type or not 
 
 
 moving 
 Boolean 
 determines if the device is moving or not 
 
 
 direction 
 String 
 the opening direction of a Blind Tilt device 
 
 
 slidePosition 
 Integer 
 the current position, 0-100 
 
 
 
 Hub 2 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceType 
 String 
 device type.
---------------latest_code---------------

Context number 1 (score: 0.769606352): 
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.http.HttpResponse.BodyHandlers;
import java.time.Instant;
import java.util.Base64;
import java.util.UUID;

import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

public class Main {
    public static void main(String[] args) throws Exception {
    	
      String token = args[0];
      String secret = args[1];
      String nonce = UUID.randomUUID().toString();
      String time= "" + Instant.now().toEpochMilli();
      String data = token + time + nonce;
      
      SecretKeySpec secretKeySpec = new SecretKeySpec(secret.getBytes("UTF-8"), "HmacSHA256");
      Mac mac = Mac.getInstance("HmacSHA256");
      mac.init(secretKeySpec);
      String signature = new String(Base64.getEncoder().encode(mac.doFinal(data.getBytes("UTF-8"))));      
      
      HttpRequest getDevices = HttpRequest.newBuilder()
      .uri(new URI("https://api.switch-bot.com/v1.1/devices"))
      .header("Authorization", token)
      .header("sign", signature)
      .header("nonce", nonce)
      .header("t", time)
      .GET()
      .build();
      
      HttpResponse<String> response = HttpClient.newBuilder().build().send(getDevices, BodyHandlers.ofString());
      
      System.out.println(response.body());
    }
}
Context number 2 (score: 0.747305393): 
GET https://api.switch-bot.com/v1.1/devices/E2F6032048AB/status
Context number 3 (score: 0.74447453): 
GET https://api.switch-bot.com/v1.1/devices/C271111EC0AB/status
Context number 4 (score: 0.74441278): 
GET https://api.switch-bot.com/v1.1/devices
Context number 5 (score: 0.742527127): 
https://api.switch-bot.com
Context number 6 (score: 0.739936352): 
const crypto = require('crypto');
const https = require('https');

const token = "yourToken";
const secret = "yourSecret";
const t = Date.now();
const nonce = "requestID";
const data = token + t + nonce;
const signTerm = crypto.createHmac('sha256', secret)
    .update(Buffer.from(data, 'utf-8'))
    .digest();
const sign = signTerm.toString("base64");
console.log(sign);

const body = JSON.stringify({
    "command": "turnOn",
    "parameter": "default",
    "commandType": "command"
});
const deviceId = "MAC";
const options = {
    hostname: 'api.switch-bot.com',
    port: 443,
    path: `/v1.1/devices/${deviceId}/commands`,
    method: 'POST',
    headers: {
        "Authorization": token,
        "sign": sign,
        "nonce": nonce,
        "t": t,
        'Content-Type': 'application/json',
        'Content-Length': body.length,
    },
};

const req = https.request(options, res => {
    console.log(`statusCode: ${res.statusCode}`);
    res.on('data', d => {
        process.stdout.write(d);
    });
});

req.on('error', error => {
    console.error(error);
});

req.write(body);
req.end();
Context number 7 (score: 0.739274621): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoSweeperMiniPro",
        "deviceMac": DEVICE_MAC_ADDR,
        "workingStatus"："StandBy",
        "onlineStatus": "online",
        "battery": 100,
        "timeOfSample": 123456789
    }
}
Context number 8 (score: 0.73661989): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoPlugUS",
        "deviceMac": DEVICE_MAC_ADDR,
        "powerState": "ON",
        "timeOfSample": 123456789
    }
}
Context number 9 (score: 0.735917032): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoPlugJP",
        "deviceMac": DEVICE_MAC_ADDR,
        "powerState": "ON",
        "timeOfSample": 123456789
    }
}
Context number 10 (score: 0.735693216): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoSweeper",
        "deviceMac": DEVICE_MAC_ADDR,
        "workingStatus"："StandBy",
        "onlineStatus": "online",
        "battery": 100,
        "timeOfSample": 123456789
    }
}
Context number 11 (score: 0.73445189): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "Robot Vacuum Cleaner S10",
        "deviceMac": DEVICE_MAC_ADDR,
        "workingStatus"："StandBy",
        "onlineStatus": "online",
        "battery": 100,// 0-100
        "waterBaseBattery": 100,
        "taskType": "explore",
        "timeOfSample": 123456789
    }
}
Context number 12 (score: 0.734282255): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoSweeperMini",
        "deviceMac": DEVICE_MAC_ADDR,
        "workingStatus"："StandBy",
        "onlineStatus": "online",
        "battery": 100,
        "timeOfSample": 123456789
    }
}
Context number 13 (score: 0.733587265): 
import time
import hashlib
import hmac
import base64

# open token
token = '' # copy and paste from the SwitchBot app V6.14 or later
# secret key
secret = '' # copy and paste from the SwitchBot app V6.14 or later
nonce = ''
t = int(round(time.time() * 1000))
string_to_sign = '{}{}{}'.format(token, t, nonce)

sign = base64.b64encode(hmac.new(secret, msg=string_to_sign, digestmod=hashlib.sha256).digest())
print ('Authorization: {}'.format(token))
print ('t: {}'.format(t))
print ('sign: {}'.format(sign))
print ('nonce: {}'.format(nonce))
Context number 14 (score: 0.732949793): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoCurtain3",
        "deviceMac": DEVICE_MAC_ADDR,
        "calibrate":false,
        "group":false,
        "slidePosition":50, //0~100
        "battery":100,
        "timeOfSample": 123456789
    }
}
Context number 15 (score: 0.732366323): 
import json
import time
import hashlib
import hmac
import base64
import uuid

# Declare empty header dictionary
apiHeader = {}
# open token
token = '' # copy and paste from the SwitchBot app V6.14 or later
# secret key
secret = '' # copy and paste from the SwitchBot app V6.14 or later
nonce = uuid.uuid4()
t = int(round(time.time() * 1000))
string_to_sign = '{}{}{}'.format(token, t, nonce)

string_to_sign = bytes(string_to_sign, 'utf-8')
secret = bytes(secret, 'utf-8')

sign = base64.b64encode(hmac.new(secret, msg=string_to_sign, digestmod=hashlib.sha256).digest())
print ('Authorization: {}'.format(token))
print ('t: {}'.format(t))
print ('sign: {}'.format(str(sign, 'utf-8')))
print ('nonce: {}'.format(nonce))

#Build api header JSON
apiHeader['Authorization']=token
apiHeader['Content-Type']='application/json'
apiHeader['charset']='utf8'
apiHeader['t']=str(t)
apiHeader['sign']=str(sign, 'utf-8')
apiHeader['nonce']=str(nonce)
Context number 16 (score: 0.732333302): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoSweeperPlus",
        "deviceMac": DEVICE_MAC_ADDR,
        "workingStatus"："StandBy",
        "onlineStatus": "online",
        "battery": 100,
        "timeOfSample": 123456789
    }
}
Context number 17 (score: 0.73227483): 
POST https://api.switch-bot.com/v1.1/devices/02-202007201626-70/commands
Context number 18 (score: 0.731907308): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoFan2",
        "deviceMac": DEVICE_MAC_ADDR,
        "mode": "direct",
        "version": "V3.1",
        "battery": 22,
        "powerState": "ON",
        "nightStatus": "off",
        "oscillation": "on",
        "verticalOscillation": "on",
        "chargingStatus": "charging",
        "fanSpeed": 3,
        "timeOfSample": 123456789
    }
}
Context number 19 (score: 0.731404424): 
POST https://api.switch-bot.com/v1.1/devices/02-202007201626-10/commands
Context number 20 (score: 0.731018901): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoHand",
        "deviceMac": DEVICE_MAC_ADDR,
        "power": "on",//"on"or"off"
        "battery": 10,
        "deviceMode": "pressMode",//pressMode,switchMode,customizeMode
        "timeOfSample": 123456789
    }
}
---------------outdated_natural_language---------------

Context number 1 (score: 0.759717166): 
SwitchBot API v1.0 
 
 SwitchBot API 
 
 Introduction 
 Getting Started 
 Authentication 
 
 Open Token 
 
 
 Glossary 
 API Usage 
 
 Host Domain 
 Sending a Request 
 
 Content-Type 
 Request limit 
 
 
 Request Header 
 Standard HTTP Error Codes 
 
 
 Devices 
 
 Get device list 
 
 Description 
 Responses 
 Sample 
 
 Get all devices 
 
 
 
 
 Get device status 
 
 Description 
 Path parameters 
 Responses 
 Sample 
 
 SwitchBot Meter example 
 SwitchBot Curtain example 
 
 
 
 
 Send device control commands 
 
 Description 
 Command set for physical devices 
 Command set for virtual infrared remote devices 
 Path parameters 
 Request body parameters 
 Response 
 Errors 
 Sample 
 
 Bot example 
 Infrared remote device example 
 
 
 
 
 
 
 Scenes 
 
 Get scene list 
 
 Description 
 Response 
 Errors 
 Sample 
 
 Get all scenes 
 
 
 
 
 Execute manual scenes 
 
 Description 
 Path parameters 
 Errors 
 Sample 
 
 Execute a scene 
 
 
 
 
 
 
 Webhook 
 
 Setup webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Query webhook 
 
 Description 
 Request 
 
 Request body parameters 
 queryUrl 
 queryDetails 
 
 
 Response 
 
 queryUrl 
 queryDetails 
 
 
 
 
 Update webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Delete webhook 
 
 Description 
 Request 
 
 Request body parameters 
 
 
 Response 
 
 
 Receive events from webhook 
 
 Motion Sensor 
 Contact Sensor 
 Meter 
 Meter Plus 
 Lock 
 Indoor Cam 
 Pan/Tilt Cam 
 Color Bulb 
 LED Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 
 
 
 
 
 
 
 Introduction 
 This document describes a collection of SwitchBot API methods, examples, and best practices for, but not limited to, IoT hobbyists, developers, and gurus to make their own smart home programs or applications. 
 Getting Started 
 Please follow these steps, 
 
 Download the SwitchBot app on App Store or Google Play Store 
 Register a SwitchBot account and log in into your account 
 Generate an Open Token within the app
a) Go to Profile > Preference
b) Tap App Version 10 times. Developer Options will show up
c) Tap Developer Options
d) Tap Get Token 
 Roll up your sleeves and get your hands dirty with SwitchBot OpenAPI! 
 
 Authentication 
 Open Token 
 The token returned from the SwitchBot Cloud is an encrypted open token that grants the user developer-level permissions.
Context number 2 (score: 0.733751893): 
power: off/on, fanMode: 1/2, fanSpeed: 1/2/3/4, shakeRange: 0~120 fanMode: 1 (Standard), 2 (Natural) 
 
 
 Color Bulb 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Color Bulb 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Color Bulb 
 command 
 toggle 
 default 
 toggle state 
 
 
 Color Bulb 
 command 
 setBrightness 
 
 set brightness 
 
 
 Color Bulb 
 command 
 setColor 
 
 set RGB color value 
 
 
 Color Bulb 
 command 
 setColorTemperature 
 
 set color temperature 
 
 
 Strip Light 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Strip Light 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Strip Light 
 command 
 toggle 
 default 
 toggle state 
 
 
 Strip Light 
 command 
 setBrightness 
 
 set brightness 
 
 
 Strip Light 
 command 
 setColor 
 
 set RGB color value 
 
 
 Plug Mini (US/JP) 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug Mini (US/JP) 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Plug Mini (US/JP) 
 command 
 toggle 
 default 
 toggle state 
 
 
 Robot Vacuum Cleaner S1 
 command 
 start 
 default 
 start vacuuming 
 
 
 Robot Vacuum Cleaner S1 
 command 
 stop 
 default 
 stop vacuuming 
 
 
 Robot Vacuum Cleaner S1 
 command 
 dock 
 default 
 return to charging dock 
 
 
 Robot Vacuum Cleaner S1 
 command 
 PowLevel 
 
 set suction power level: 0 (Quiet), 1 (Standard), 2 (Strong), 3 (MAX) 
 
 
 Robot Vacuum Cleaner S1 Plus 
 command 
 start 
 default 
 start vacuuming 
 
 
 Robot Vacuum Cleaner S1 Plus 
 command 
 stop 
 default 
 stop vacuuming 
 
 
 Robot Vacuum Cleaner S1 Plus 
 command 
 dock 
 default 
 return to charging dock 
 
 
 Robot Vacuum Cleaner S1 Plus 
 command 
 PowLevel 
 
 set suction power level: 0 (Quiet), 1 (Standard), 2 (Strong), 3 (MAX) 
 
 
 
 Command set for virtual infrared remote devices 
 The table below describes all the available commands for virtual infrared remote devices,
Context number 3 (score: 0.7277354): 
422 
 Unprocessable Entity 
 The client has made a valid request, but the server cannot process it. This is often used for APIs for which certain limits have been exceeded. 
 
 
 429 
 Too Many Requests 
 The client has exceeded the number of requests allowed for a given time window. 
 
 
 500 
 Internal Server Error 
 An unexpected error on the SmartThings servers has occurred. These errors should be rare. 
 
 
 
 Devices 
 The devices API is used to access the properties and states of SwitchBot devices and to send control commands to those devices. 
 Get device list 
 
 Description 
 Get a list of devices, which include physical devices and virtual infrared remote devices that have been added to the current user's account. 
 Physical devices refer to the following SwitchBot products, 
 
 Hub 
 Hub Plus 
 Hub Mini 
 Bot (MUST enable Cloud Service first) 
 Curtain (MUST enable Cloud Service first) 
 Plug 
 Meter (MUST enable Cloud Service first) 
 Motion Sensor (MUST enable Cloud Service first) 
 Contact Sensor (MUST enable Cloud Service first) 
 Color Bulb 
 Humidifier 
 Smart Fan 
 Strip Light 
 Plug Mini (US) 
 Plug Mini (JP) 
 Lock 
 Meter Plus (JP) (MUST enable Cloud Service first) 
 Meter Plus (US) (MUST enable Cloud Service first) 
  Robot Vacuum Cleaner S1 
  Robot Vacuum Cleaner S1 Plus 
 
 Virtual infrared remote devices refer to virtual devices that are used to simulate infrared signals of a home appliance remote control. A SwitchBot Hub Plus / Hub Mini is required in order to be able to create these virtual devices within the app.
Context number 4 (score: 0.72499007): 
range from 1 to 100 
 
 
 color 
 String 
 the color value, in the format of RGB value, "255:255:255" 
 
 
 colorTemperature 
 Integer 
 the color temperature value, range from 2700 to 6500 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 LED Strip Light 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 powerState 
 String 
 the current power state of the device, "ON" or "OFF" 
 
 
 brightness 
 Integer 
 the brightness value, range from 1 to 100 
 
 
 color 
 String 
 the color value, in the format of RGB value, "255:255:255" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Plug Mini (US) 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 powerState 
 String 
 the current power state of the device, "ON" or "OFF" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Plug Mini (JP) 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 powerState 
 String 
 the current power state of the device, "ON" or "OFF" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 
 
 SwitchBot (Official website) 
 Facebook @SwitchBotRobot 
 Twitter @SwitchBot
Context number 5 (score: 0.72432971): 
A SwitchBot Hub Plus / Hub Mini is required in order to be able to create these virtual devices within the app. The types of appliances supported include, 
 
 Air Conditioner 
 TV 
 Light 
 IPTV/Streamer 
 Set Top Box 
 DVD 
 Fan 
 Projector 
 Camera 
 Air Purifier 
 Speaker 
 Water Heater 
 Vacuum Cleaner 
 Others 
 
 Responses 
 The response is basically a JSON object, which contains the following properties, 
 
 
 
 Key Name 
 Value Type 
 
 
 
 
 statusCode 
 Integer 
 
 
 message 
 String 
 
 
 body 
 Object 
 
 
 
 The body object contains the following properties, 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 deviceList 
 Array 
 a list of physical devices 
 
 
 infraredRemoteList 
 Array 
 a list of virtual infrared remote devices 
 
 
 
 The deviceList array contains a list of objects with the following key-value attributes, 
 
 
 
 Key 
 Value Type 
 Description 
 
 
 
 
 deviceId 
 String 
 device ID 
 
 
 deviceName 
 String 
 device name 
 
 
 deviceType 
 String 
 device type 
 
 
 enableCloudService 
 Boolean 
 determines if Cloud Service is enabled or not for the current device 
 
 
 hubDeviceId 
 String 
 device's parent Hub ID 
 
 
 curtainDevicesIds 
 Array 
 only available for Curtain devices. a list of Curtain device IDs such that the Curtain devices are being paired or grouped 
 
 
 calibrate 
 Boolean 
 only available for Curtain/Lock devices. determines if the open position and the close position of a device have been properly calibrated or not 
 
 
 group 
 Boolean 
 only available for Curtain devices. determines if a Curtain is paired with or grouped with another Curtain or not 
 
 
 master 
 Boolean 
 only available for Curtain devices. determines if a Curtain is the master device or not when paired with or grouped with another Curtain 
 
 
 openDirection 
 String 
 only available for Curtain devices.
Context number 6 (score: 0.720929): 
range from 1 to 100 
 
 
 color 
 String 
 Color Bulb/Strip Light 
 the color value, RGB "255:255:255" 
 
 
 colorTemperature 
 Integer 
 Color Bulb 
 the color temperature value, range from 2700 to 6500 
 
 
 lackWater 
 Boolean 
 Humidifier 
 determines if the water tank is empty or not 
 
 
 voltage 
 Integer 
 Plug Mini 
 Current voltage of the device (Unit: V) 
 
 
 weight 
 Integer 
 Plug Mini 
 the power consumption of the device for the day (Unit: W/min) 
 
 
 electricityOfDay 
 Integer 
 Plug Mini 
 How long the device has been used for the day (Unit: min) 
 
 
 electricCurrent 
 Integer 
 Plug Mini 
 current of the device (Unit: A) at the moment 
 
 
 lockState 
 String 
 Lock 
 determines if the lock is locked or not 
 
 
 doorState 
 String 
 Lock 
 determines if the door is closed or not 
 
 
 workingStatus 
 String 
 Robot Vacuum Cleaner S1/ S1 Plus 
 the working status of the device, e.g. Cleaning, Paused 
 
 
 onlineStatus 
 String 
 Robot Vacuum Cleaner S1/ S1 Plus 
 determines if the device is online or offline 
 
 
 battery 
 Integer 
 Robot Vacuum Cleaner S1/ S1 Plus 
 the battery level 
 
 
 
 The reponses may contain the following codes and message, 
 
 
 
 Status Code 
 Body Content 
 Message 
 Description 
 
 
 
 
 100 
 Device list object 
 success 
 Returns an object that contains two device lists 
 
 
 n/a 
 n/a 
 Unauthorized 
 Http 401 Error. User permission is denied due to invalid token. 
 
 
 190 
 n/a 
 System error 
 Device internal error due to device states not synchronized with server 
 
 
 
 Sample 
 SwitchBot Meter example 
 Request the status of a SwitchBot Thermometer and Hygrometer 
 Request 
 
 Response 
 
 SwitchBot Curtain example 
 Request the status of a SwitchBot Curtain 
 Request 
 
 Response 
 
 Send device control commands 
 
 Description 
 Send control commands to physical devices and virtual infrared remote devices.
Context number 7 (score: 0.719911337): 
Authentication 
 Open Token 
 The token returned from the SwitchBot Cloud is an encrypted open token that grants the user developer-level permissions. The user will be able to add, delete, edit, and look up his or her user data including profile data and data associated with the devices that have been added to the user's account. 
 Glossary 
 The following table provides definitions to the terms to be frequently mentioned in the subsequent sections. 
 
 
 
 Term 
 Description 
 
 
 
 
 Hub 
 Generally referred to these devices, SwitchBot Hub Model No. SwitchBot Hub S1/SwitchBot Hub Mini Model No. W0202200/SwitchBot Hub Plus Model No. SwitchBot Hub S1 
 
 
 Hub Mini 
 Short for SwitchBot Hub Mini Model No. W0202200 
 
 
 Hub Plus 
 Short for SwitchBot Hub Plus Model No. SwitchBot Hub S1 
 
 
 Bot 
 Short for SwitchBot Bot Model No. SwitchBot S1 
 
 
 Curtain 
 Short for SwitchBot Curtain Model No. W0701600 
 
 
 Plug 
 Short for SwitchBot Plug Model No. SP11 
 
 
 Meter 
 Short for SwitchBot Thermometer and Hygrometer Model No. SwitchBot MeterTH S1 
 
 
 Meter Plus (JP) 
 Short for SwitchBot Thermometer and Hygrometer Plus (JP) Model No. W2201500 
 
 
 Meter Plus (US) 
 Short for SwitchBot Thermometer and Hygrometer Plus (US) Model No. W2301500 
 
 
 Motion Sensor 
 Short for SwitchBot Motion Sensor Model No. W1101500 
 
 
 Contact Sensor 
 Short for SwitchBot Contact Sensor Model No. W1201500 
 
 
 Color Bulb 
 Short for SwitchBot Color Bulb Model No. W1401400 
 
 
 Smart Fan 
 Short for SwitchBot Smart Fan Model No. W0601100 
 
 
 Strip Light 
 Short for SwitchBot LED Strip Light Model No. W1701100 
 
 
 Plug Mini (US) 
 Short for SwitchBot Plug Mini (US) Model No. W1901400 
 
 
 Plug Mini (JP) 
 Short for SwitchBot Plug Mini (JP) Model No. W2001400 
 
 
 Lock 
 Short for SwitchBot Lock Model No. W1601700 
 
 
 Robot Vacuum Cleaner S1 
 Short for SwitchBot Robot Vacuum Cleaner S1 Model No.
Context number 8 (score: 0.719574392): 
15 
 set the TV channel to switch to 
 
 
 
 command 
 volumeAdd 
 default 
 volume up 
 
 
 
 command 
 volumeSub 
 default 
 volume down 
 
 
 
 command 
 channelAdd 
 default 
 next channel 
 
 
 
 command 
 channelSub 
 default 
 previous channel 
 
 
 DVD, Speaker 
 command 
 setMute 
 default 
 mute/unmute 
 
 
 
 command 
 FastForward 
 default 
 fast forward 
 
 
 
 command 
 Rewind 
 default 
 rewind 
 
 
 
 command 
 Next 
 default 
 next track 
 
 
 
 command 
 Previous 
 default 
 last track 
 
 
 
 command 
 Pause 
 default 
 pause 
 
 
 
 command 
 Play 
 default 
 play/resume 
 
 
 
 command 
 Stop 
 default 
 stop 
 
 
 Speaker 
 command 
 volumeAdd 
 default 
 volume up 
 
 
 
 command 
 volumeSub 
 default 
 volume down 
 
 
 Fan 
 command 
 swing 
 default 
 swing 
 
 
 
 command 
 timer 
 default 
 set timer 
 
 
 
 command 
 lowSpeed 
 default 
 set fan speed to low 
 
 
 
 command 
 middleSpeed 
 default 
 set fan speed to medium 
 
 
 
 command 
 highSpeed 
 default 
 set fan speed to high 
 
 
 Light 
 command 
 brightnessUp 
 default 
 brightness up 
 
 
 
 command 
 brightnessDown 
 default 
 brightness down 
 
 
 
 
 Note: Most of the devices support   or  , which are case-sensitive. For infrared remote devices, when you have created customized buttons, you must set   to  , otherwise the command will not work.   needs to be set to the name of the customized button. 
 
 Path parameters 
 
 
 
 Name 
 Type 
 Required 
 Description 
 
 
 
 
 deviceId 
 String 
 Yes 
 device ID 
 
 
 
 Request body parameters 
 
 
 
 Name 
 Type 
 Required 
 Description 
 
 
 
 
 command 
 String 
 Yes 
 the name of the command 
 
 
 parameter 
 String 
 No 
 some commands require parameters, such as  
 
 
 commandType 
 String 
 No 
 for customized buttons, this needs to be set to  
 
 
 
 Response 
 The response is basically a JSON object, which contains the following properties, 
 
 
 
 Key Name 
 Value Type 
 
 
 
 
 statusCode 
 Integer 
 
 
 message 
 String 
 
 
 body 
 Object 
 
 
 
 Errors 
 
 
 
 Error code/message 
 Description 
 
 
 
 
 {"message": "Unauthorized"} 
 Http 401 Error. User permission is denied due to invalid token.
Context number 9 (score: 0.719535768): 
User permission is denied due to invalid token. 
 
 
 190 
 Device internal error due to device states not synchronized with server 
 
 
 
 Sample 
 Execute a scene 
 Request 
 
 Response 
 
 Webhook 
 Configure webhook 
 Description 
 Configure the url that all the webhook events will be sent to 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 url 
 String 
 the url where all the events are sent to 
 
 
 deviceList 
 String 
 the list of device ids, currently only supports "ALL" 
 
 
 
 Head 
 
 Body 
 
 Response 
 Sample 
 
 Get webhook configuration 
 Description 
 Get the current configuration info of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions, currently supports "queryUrl", "queryDetails" 
 
 
 url 
 String 
 the url where all the events are sent to. you need to specify the url when using queryDetails 
 
 
 
 queryUrl 
 Head 
 
 Body 
 
 queryDetails 
 Head 
 
 Body 
 
 Response 
 queryUrl 
 
 queryDetails 
 
 Update webhook configuration 
 Description 
 Update the configuration of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 config 
 Object 
 the configuration details you want to update. you can change the current url or enable/disable the webhook. refer to the example below 
 
 
 
 Head 
 
 Body 
 
 Response 
 
 Delete webhook 
 Description 
 Delete the configuration of the webhook 
 Request 
 
 Request body parameters 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 action 
 String 
 the type of actions 
 
 
 url 
 String 
 the url where all the events are sent to 
 
 
 
 Head 
 
 Body 
 
 Response 
 
 Receive events from webhook 
 When an event gets triggered, SwitchBot server will send a   request to the url you have configured. Refer to the table below for a list of products that support webhook.
Context number 10 (score: 0.718974113): 
W2001400 
 
 
 Lock 
 Short for SwitchBot Lock Model No. W1601700 
 
 
 Robot Vacuum Cleaner S1 
 Short for SwitchBot Robot Vacuum Cleaner S1 Model No. W3011000; currently only available in Japan 
 
 
 Robot Vacuum Cleaner S1 Plus 
 Short for SwitchBot Robot Vacuum Cleaner S1 Plus Model No. W3011010; currently only available in Japan 
 
 
 Cloud Service 
 An SwitchBot app feature that 1. enables SwitchBot products to be discovered and communicated with third-party services voice control services, 2. allows users to create customized smart scenes and Android widgets. For BLE-based devices such as Bot and Curtain, you MUST first add a Hub/Hub Mini/Hub Plus and then enable Cloud Service on the Settings page in order to make use of the web API! 
 
 
 
 API Usage 
 Host Domain 
 
 Sending a Request 
 The following request types are supported, 
 
 GET 
 PUT 
 POST 
 DELETE 
 
 Content-Type 
 For   requests, use   as the  
 Request limit 
 The amount of API calls per day is limited to  10000  times. Going over that limit will return "Unauthorized." 
 Request Header 
 The following parameters need to be included into the header, 
 
 
 
 Parameter 
 Type 
 Location 
 Required 
 Description 
 
 
 
 
 Authorization 
 String 
 header 
 Yes 
 Open Token acquired 
 
 
 
 Standard HTTP Error Codes 
 The following table lists the most common HTTP error response, 
 
 
 
 Code 
 Name 
 Description 
 
 
 
 
 400 
 Bad Request 
 The client has issued an invalid request. This is commonly used to specify validation errors in a request payload. 
 
 
 401 
 Unauthorized 
 Authorization for the API is required, but the request has not been authenticated. 
 
 
 403 
 Forbidden 
 The request has been authenticated but does not have appropriate permissions, or a requested resource is not found. 
 
 
 404 
 Not Found 
 Specifies the requested path does not exist. 
 
 
 406 
 Not Acceptable 
 The client has requested a MIME type via the Accept header for a value not supported by the server. 
 
 
 415 
 Unsupported Media Type 
 The client has defined a contentType header that is not supported by the server. 
 
 
 422 
 Unprocessable Entity 
 The client has made a valid request, but the server cannot process it. This is often used for APIs for which certain limits have been exceeded.
Context number 11 (score: 0.702744961): 
"IN_DOOR" or "OUT_DOOR" is returned 
 
 
 brightness 
 String 
 the level of brightness, can be "bright" or "dim" 
 
 
 openState 
 String 
 the state of the contact sensor, can be "open" or "close" or "timeOutNotClose" 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Meter 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 temperature 
 Float 
 the current temperature reading 
 
 
 scale 
 String 
 the current temperature unit being used 
 
 
 humidity 
 Integer 
 the current humidity reading in percentage 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Meter Plus 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 temperature 
 Float 
 the current temperature reading 
 
 
 scale 
 String 
 the current temperature unit being used 
 
 
 humidity 
 Integer 
 the current humidity reading in percentage 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Lock 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 lockState 
 String 
 the state of the device, "LOCKED" stands for the motor is rotated to locking position; "UNLOCKED" stands for the motor is rotated to unlocking position;
Context number 12 (score: 0.702297449): 
Command set for physical devices 
 The table below describes all the available commands for physical devices, 
 
 
 
 deviceType 
 commandType 
 Command 
 command parameter 
 Description 
 
 
 
 
 Bot 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Bot 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Bot 
 command 
 press 
 default 
 trigger press 
 
 
 Plug 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Plug 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Curtain 
 command 
 setPosition 
 index0,mode0,position0 e.g.  
 mode: 0 (Performance Mode), 1 (Silent Mode), ff (default mode)  position: 0~100 (0 means opened, 100 means closed) 
 
 
 Curtain 
 command 
 turnOff 
 default 
 equivalent to set position to 100 
 
 
 Curtain 
 command 
 turnOn 
 default 
 equivalent to set position to 0 
 
 
 Humidifier 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Humidifier 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Humidifier 
 command 
 setMode 
  or   or    or   or  
 auto, set to Auto Mode, 101, set atomization efficiency to 34%, 102, set atomization efficiency to 67%, 103, set atomization efficiency to 100% 
 
 
 Smart Fan 
 command 
 turnOn 
 default 
 set to ON state 
 
 
 Smart Fan 
 command 
 turnOff 
 default 
 set to OFF state 
 
 
 Smart Fan 
 command 
 setAllStatus 
 power,fanMode, fanSpeed,shakeRange e.g.  
 power: off/on, fanMode: 1/2, fanSpeed: 1/2/3/4, shakeRange: 0~120 fanMode: 1 (Standard),
Context number 13 (score: 0.701679945): 
Refer to the table below for a list of products that support webhook. 
 
 
 
 Device Type 
 Product 
 
 
 
 
 WoPresence 
 Motion Sensor 
 
 
 WoContact 
 Contact Sensor 
 
 
 WoLock 
 Lock 
 
 
 WoCamera 
 Indoor Cam 
 
 
 WoPanTiltCam 
 Pan/Tilt Cam 
 
 
 WoBulb 
 Color Bulb 
 
 
 WoStrip 
 LED Strip Light 
 
 
 WoPlugUS 
 Plug Mini (US) 
 
 
 WoPlugJP 
 Plug Mini (JP) 
 
 
 WoMeter 
 Meter 
 
 
 WoMeterPlus 
 Meter Plus 
 
 
 
 Motion Sensor 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 detectionState 
 String 
 the motion state of the device, "DETECTED" stands for motion is detected; "NOT_DETECTED" stands for motion has not been detected for some time 
 
 
 timeOfSample 
 Long 
 the time stamp when the event is sent 
 
 
 
 
 Contact Sensor 
 
 
 
 Key Name 
 Value Type 
 Description 
 
 
 
 
 eventType 
 String 
 the type of events 
 
 
 eventVersion 
 String 
 the current event version 
 
 
 context 
 Object 
 the detail info of the event 
 
 
 deviceType 
 String 
 the type of the device 
 
 
 deviceMac 
 String 
 the MAC address of the device 
 
 
 detectionState 
 String 
 the motion state of the device, "DETECTED" stands for motion is detected; "NOT_DETECTED" stands for motion has not been detected for some time 
 
 
 doorMode 
 String 
 when the enter or exit mode gets triggered, "IN_DOOR" or "OUT_DOOR" is returned 
 
 
 brightness 
 String 
 the level of brightness, can be "bright" or "dim" 
 
 
 openState 
 String 
 the state of the contact sensor,
---------------outdated_code---------------

Context number 1 (score: 0.748070538): 
GET https://api.switch-bot.com/v1.0/devices
Context number 2 (score: 0.747512): 
GET https://api.switch-bot.com/v1.0/devices/E2F6032048AB/status
Context number 3 (score: 0.74434334): 
GET https://api.switch-bot.com/v1.0/devices/C271111EC0AB/status
Context number 4 (score: 0.742866457): 
https://api.switch-bot.com
Context number 5 (score: 0.736425): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoPlugUS",
        "deviceMac": DEVICE_MAC_ADDR,
        "powerState": "ON",
        "timeOfSample": 123456789
    }
}
Context number 6 (score: 0.73550266): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoPlugJP",
        "deviceMac": DEVICE_MAC_ADDR,
        "powerState": "ON",
        "timeOfSample": 123456789
    }
}
Context number 7 (score: 0.733432949): 
POST https://api.switch-bot.com/v1.0/devices/84F70353A411/commands
Context number 8 (score: 0.732678771): 
POST https://api.switch-bot.com/v1.0/devices/02-202007201626-10/commands
Context number 9 (score: 0.732098699): 
POST https://api.switch-bot.com/v1.0/webhook/setupWebhook
Context number 10 (score: 0.730533302): 
POST https://api.switch-bot.com/v1.0/devices/02-202007201626-70/commands
Context number 11 (score: 0.728305101): 
POST https://api.switch-bot.com/v1.0/webhook/queryWebhook
Context number 12 (score: 0.726747036): 
POST
Context number 13 (score: 0.726116419): 
turnOn
Context number 14 (score: 0.725467265): 
{
    "eventType": "changeReport",
    "eventVersion": "1",
    "context": {
        "deviceType": "WoMeter",
        "deviceMac": DEVICE_MAC_ADDR,
        "temperature": 22.5,
        "scale": "CELSIUS",
        "humidity": 31,
        "timeOfSample": 123456789
    }
}
Context number 15 (score: 0.724968255): 
GET https://api.switch-bot.com/v1.0/scenes
Context number 16 (score: 0.723442674): 
POST https://api.switch-bot.com/v1.0/scenes/T02-202009221414-48924101/execute